% Options for packages loaded elsewhere
% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother





\setlength{\emergencystretch}{3em} % prevent overfull lines

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}



 


\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\definecolor{quarto-callout-color}{HTML}{909090}
\definecolor{quarto-callout-note-color}{HTML}{0758E5}
\definecolor{quarto-callout-important-color}{HTML}{CC1914}
\definecolor{quarto-callout-warning-color}{HTML}{EB9113}
\definecolor{quarto-callout-tip-color}{HTML}{00A047}
\definecolor{quarto-callout-caution-color}{HTML}{FC5300}
\definecolor{quarto-callout-color-frame}{HTML}{acacac}
\definecolor{quarto-callout-note-color-frame}{HTML}{4582ec}
\definecolor{quarto-callout-important-color-frame}{HTML}{d9534f}
\definecolor{quarto-callout-warning-color-frame}{HTML}{f0ad4e}
\definecolor{quarto-callout-tip-color-frame}{HTML}{02b875}
\definecolor{quarto-callout-caution-color-frame}{HTML}{fd7e14}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Selection Bias \& Missing Data Challenge - Part 1},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Selection Bias \& Missing Data Challenge - Part 1}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Blue Noise Stippling: Creating Art from Data}
\author{}
\date{}
\begin{document}
\maketitle


\section{ðŸŽ¨ Selection Bias \& Missing Data Challenge - Part
1}\label{selection-bias-missing-data-challenge---part-1}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, titlerule=0mm, colframe=quarto-callout-important-color-frame, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{ðŸ“Š Challenge Requirements}, breakable, coltitle=black, opacitybacktitle=0.6, colback=white, left=2mm, rightrule=.15mm, bottomtitle=1mm, toptitle=1mm, arc=.35mm, bottomrule=.15mm, toprule=.15mm, leftrule=.75mm, opacityback=0]

\textbf{Your Task:} Reproduce the blue noise stippling process
demonstrated below to create:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  A stippled version of your chosen image
\item
  A progressive stippling GIF animation
\item
  Post both to a GitHub Pages site with appropriate captions and a brief
  explanation
\end{enumerate}

\textbf{Part 2 Preview:} On November 18th, we'll tackle Part 2 of this
challenge, where you'll create a statistical meme about selection bias
and missing data using your stippled images.

\end{tcolorbox}

\subsection{The Problem: Can Algorithms Create
Art?}\label{the-problem-can-algorithms-create-art}

\textbf{Core Question:} How can we convert a photograph into an
aesthetically pleasing pattern of dots that preserves the visual
information of the original image?

\textbf{The Challenge:} Blue noise stippling is a technique that
converts images into patterns of dots (stipples) using algorithms that
balance visual accuracy with spatial distribution. This challenge asks
you to implement a modified ``void and cluster'' algorithm that combines
importance sampling with blue noise distribution properties to create
stippling patterns that are both visually accurate and spatially
well-distributed.

\textbf{Our Approach:} We'll use a modified void-and-cluster algorithm
that: 1. Creates an importance map identifying visually important
regions 2. Uses a toroidal (periodic) Gaussian kernel for repulsion to
ensure blue noise properties 3. Iteratively selects points with minimum
energy 4. Balances image content importance with blue noise spatial
distribution

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-warning-color!10!white, titlerule=0mm, colframe=quarto-callout-warning-color-frame, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{âš ï¸ AI Partnership Required}, breakable, coltitle=black, opacitybacktitle=0.6, colback=white, left=2mm, rightrule=.15mm, bottomtitle=1mm, toptitle=1mm, arc=.35mm, bottomrule=.15mm, toprule=.15mm, leftrule=.75mm, opacityback=0]

This challenge pushes boundaries intentionally. You'll tackle problems
that normally require weeks of study, but with Cursor AI as your partner
(and your brain keeping it honest), you can accomplish more than you
thought possible.

\textbf{The new reality:} The four stages of competence are Ignorance â†’
Awareness â†’ Learning â†’ Mastery. AI lets us produce Mastery-level work
while operating primarily in the Awareness stage. I focus on awareness
training, you leverage AI for execution, and together we create outputs
that used to require years of dedicated study.

\end{tcolorbox}

\subsection{Introduction to Blue Noise
Stippling}\label{introduction-to-blue-noise-stippling}

Blue noise stippling is a technique for converting images into a pattern
of dots (stipples) that preserves the visual information of the original
image while creating an aesthetically pleasing, evenly distributed
pattern. This method follows the approach described by
\href{https://bartwronski.com/2022/08/31/progressive-image-stippling-and-greedy-blue-noise-importance-sampling/}{Bart
Wronski}.

The method uses a modified ``void and cluster'' algorithm that combines
importance sampling with blue noise distribution properties to create
stippling patterns that are both visually accurate and spatially
well-distributed. This version uses \textbf{smooth extreme
downweighting} that selectively downweights very dark and very light
tones while preserving mid-tones, creating a more balanced distribution
of stipples across the image.

\subsection{Loading the Original
Image}\label{loading-the-original-image}

First, let's load an image that we'll convert to a blue noise stippling
pattern. You can use any image you'd like, but we'll demonstrate with
the provided example.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\ImportTok{from}\NormalTok{ PIL }\ImportTok{import}\NormalTok{ Image}
\ImportTok{import}\NormalTok{ matplotlib.pyplot }\ImportTok{as}\NormalTok{ plt}

\CommentTok{\# Load the image}
\NormalTok{img\_path }\OperatorTok{=} \StringTok{\textquotesingle{}fleischhacker.jpg\textquotesingle{}}
\NormalTok{original\_img }\OperatorTok{=}\NormalTok{ Image.}\BuiltInTok{open}\NormalTok{(img\_path)}

\CommentTok{\# Convert to grayscale if needed}
\ControlFlowTok{if}\NormalTok{ original\_img.mode }\OperatorTok{!=} \StringTok{\textquotesingle{}L\textquotesingle{}}\NormalTok{:}
\NormalTok{    original\_img }\OperatorTok{=}\NormalTok{ original\_img.convert(}\StringTok{\textquotesingle{}L\textquotesingle{}}\NormalTok{)}

\CommentTok{\# Convert to numpy array and normalize to [0, 1]}
\NormalTok{img\_array }\OperatorTok{=}\NormalTok{ np.array(original\_img, dtype}\OperatorTok{=}\NormalTok{np.float32) }\OperatorTok{/} \FloatTok{255.0}

\CommentTok{\# Display the original image}
\NormalTok{fig, ax }\OperatorTok{=}\NormalTok{ plt.subplots(figsize}\OperatorTok{=}\NormalTok{(}\FloatTok{6.5}\NormalTok{, }\DecValTok{5}\NormalTok{))}
\NormalTok{ax.imshow(img\_array, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{ax.axis(}\StringTok{\textquotesingle{}off\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ax.set\_title(}\StringTok{\textquotesingle{}Original Image\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}
\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/load-image-1.pdf}}

}

\caption{Original image before stippling}

\end{figure}%

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Image shape: }\SpecialCharTok{\{}\NormalTok{img\_array}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Image shape: (375, 250)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Image size: }\SpecialCharTok{\{}\NormalTok{img\_array}\SpecialCharTok{.}\NormalTok{shape[}\DecValTok{0}\NormalTok{]}\SpecialCharTok{\}}\SpecialStringTok{x}\SpecialCharTok{\{}\NormalTok{img\_array}\SpecialCharTok{.}\NormalTok{shape[}\DecValTok{1}\NormalTok{]}\SpecialCharTok{\}}\SpecialStringTok{ pixels"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Image size: 375x250 pixels
\end{verbatim}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(imager)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: package 'imager' was built under R version 4.5.2
\end{verbatim}

\begin{verbatim}
Loading required package: magrittr
\end{verbatim}

\begin{verbatim}

Attaching package: 'imager'
\end{verbatim}

\begin{verbatim}
The following object is masked from 'package:magrittr':

    add
\end{verbatim}

\begin{verbatim}
The following objects are masked from 'package:stats':

    convolve, spectrum
\end{verbatim}

\begin{verbatim}
The following object is masked from 'package:graphics':

    frame
\end{verbatim}

\begin{verbatim}
The following object is masked from 'package:base':

    save.image
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}

\CommentTok{\# Load the image}
\NormalTok{img\_path }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}fleischhacker.jpg\textquotesingle{}}
\NormalTok{original\_img }\OtherTok{\textless{}{-}} \FunctionTok{load.image}\NormalTok{(img\_path)}

\CommentTok{\# Convert to grayscale if needed}
\CommentTok{\# Check channels (dim[3]), not depth (dim[4])}
\ControlFlowTok{if}\NormalTok{(}\FunctionTok{dim}\NormalTok{(original\_img)[}\DecValTok{3}\NormalTok{] }\SpecialCharTok{==} \DecValTok{3}\NormalTok{) \{}
\NormalTok{  original\_img }\OtherTok{\textless{}{-}} \FunctionTok{grayscale}\NormalTok{(original\_img)}
\NormalTok{\}}

\CommentTok{\# Display the original image}
\FunctionTok{plot}\NormalTok{(original\_img, }\AttributeTok{axes =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{main =} \StringTok{"Original Image"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/load-image-r-3.pdf}}

}

\caption{Original image before stippling}

\end{figure}%

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"Image dimensions:"}\NormalTok{, }\FunctionTok{dim}\NormalTok{(original\_img)[}\DecValTok{1}\NormalTok{], }\StringTok{"x"}\NormalTok{, }\FunctionTok{dim}\NormalTok{(original\_img)[}\DecValTok{2}\NormalTok{], }\StringTok{"pixels}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Image dimensions: 250 x 375 pixels
\end{verbatim}

\subsection{Importance Mapping}\label{importance-mapping}

Before applying the stippling algorithm, we create an \textbf{importance
map} that identifies which regions of the image should receive more
stipples. The importance map is computed by:

\begin{itemize}
\tightlist
\item
  \textbf{Brightness inversion}: The image brightness is inverted so
  that dark areas receive higher importance and thus more dots, while
  light areas receive fewer dots
\item
  \textbf{Extreme tone downweighting}: Smooth Gaussian functions
  downweight tones below 0.2 (very dark) and above 0.8 (very light),
  creating a gradual transition that preserves mid-tones
\item
  \textbf{Mid-tone boost}: A smooth Gaussian function centered on
  mid-tones provides a gradual increase in importance for mid-tone
  regions, ensuring they receive appropriate stippling density
\item
  \textbf{Selective and effective}: This approach ensures that stipples
  are distributed appropriately (more dots in dark areas and mid-tones,
  fewer in extreme dark/light areas) while maintaining good spatial
  distribution
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, titlerule=0mm, colframe=quarto-callout-important-color-frame, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{ðŸŽ¯ Key Tuning Point: \texttt{compute\_importance} Function}, breakable, coltitle=black, opacitybacktitle=0.6, colback=white, left=2mm, rightrule=.15mm, bottomtitle=1mm, toptitle=1mm, arc=.35mm, bottomrule=.15mm, toprule=.15mm, leftrule=.75mm, opacityback=0]

\textbf{This function is all you need to control dot distribution!} The
\texttt{compute\_importance} function is the primary mechanism for
tuning where more or fewer dots appear in your stippled image. By
adjusting its parameters, you can:

\begin{itemize}
\tightlist
\item
  \textbf{Control which tones get more dots}: Adjust
  \texttt{extreme\_threshold\_low} and \texttt{extreme\_threshold\_high}
  to define what counts as ``extreme'' tones
\item
  \textbf{Reduce dots in extreme regions}: Increase
  \texttt{extreme\_downweight} (0.0-1.0) to reduce stipples in very dark
  or very light areas
\item
  \textbf{Boost specific tone ranges}: Adjust \texttt{mid\_tone\_boost}
  and \texttt{mid\_tone\_center} to emphasize particular brightness
  ranges (e.g., skin tones around 0.7)
\item
  \textbf{Control transition smoothness}: Modify \texttt{extreme\_sigma}
  and \texttt{mid\_tone\_sigma} to make transitions sharper or more
  gradual
\end{itemize}

\textbf{No need to modify the stippling algorithm itself}---all the
tuning happens in this function. Experiment with different parameter
values to achieve your desired dot distribution!

\end{tcolorbox}

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{def}\NormalTok{ compute\_importance(}
\NormalTok{    gray\_img: np.ndarray,}
\NormalTok{    extreme\_downweight: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.5}\NormalTok{,}
\NormalTok{    extreme\_threshold\_low: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.4}\NormalTok{,}
\NormalTok{    extreme\_threshold\_high: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.8}\NormalTok{,}
\NormalTok{    extreme\_sigma: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.1}\NormalTok{,}
\NormalTok{    mid\_tone\_boost: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.4}\NormalTok{,}
\NormalTok{    mid\_tone\_sigma: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.2}\NormalTok{,}
\NormalTok{):}
    \CommentTok{"""}
\CommentTok{    Importance map computation that downweights extreme tones (very dark and very light)}
\CommentTok{    using smooth functions, while boosting mid{-}tones.}
\CommentTok{    }
\CommentTok{    Parameters}
\CommentTok{    {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{    gray\_img : np.ndarray}
\CommentTok{        Grayscale image in [0, 1]}
\CommentTok{    extreme\_downweight : float}
\CommentTok{        Strength of downweighting for extreme tones (0.0 = no downweighting, 1.0 = maximum downweighting)}
\CommentTok{    extreme\_threshold\_low : float}
\CommentTok{        Threshold below which tones are considered "very dark" and get downweighted}
\CommentTok{    extreme\_threshold\_high : float}
\CommentTok{        Threshold above which tones are considered "very light" and get downweighted}
\CommentTok{    extreme\_sigma : float}
\CommentTok{        Width of the smooth transition for extreme downweighting (smaller = sharper transition)}
\CommentTok{    mid\_tone\_boost : float}
\CommentTok{        Strength of mid{-}tone emphasis (0.0 = no boost, 1.0 = strong boost)}
\CommentTok{    mid\_tone\_sigma : float}
\CommentTok{        Width of the mid{-}tone Gaussian bump (smaller = narrower, larger = wider)}
\CommentTok{    }
\CommentTok{    Returns}
\CommentTok{    {-}{-}{-}{-}{-}{-}{-}}
\CommentTok{    importance : np.ndarray}
\CommentTok{        Importance map in [0, 1]; higher = more stipples (dark areas and mid{-}tones get higher importance)}
\CommentTok{    """}
\NormalTok{    I }\OperatorTok{=}\NormalTok{ np.clip(gray\_img, }\FloatTok{0.0}\NormalTok{, }\FloatTok{1.0}\NormalTok{)}
    
    \CommentTok{\# Invert brightness: dark areas should get more dots (higher importance)}
\NormalTok{    I\_inverted }\OperatorTok{=} \FloatTok{1.0} \OperatorTok{{-}}\NormalTok{ I}
    
    \CommentTok{\# Create smooth downweighting mask for extreme tones}
    \CommentTok{\# Downweight very dark regions (I \textless{} extreme\_threshold\_low)}
\NormalTok{    dark\_mask }\OperatorTok{=}\NormalTok{ np.exp(}\OperatorTok{{-}}\NormalTok{((I }\OperatorTok{{-}} \FloatTok{0.0}\NormalTok{) }\OperatorTok{**} \DecValTok{2}\NormalTok{) }\OperatorTok{/}\NormalTok{ (}\FloatTok{2.0} \OperatorTok{*}\NormalTok{ (extreme\_sigma }\OperatorTok{**} \DecValTok{2}\NormalTok{)))}
\NormalTok{    dark\_mask }\OperatorTok{=}\NormalTok{ np.where(I }\OperatorTok{\textless{}}\NormalTok{ extreme\_threshold\_low, dark\_mask, }\FloatTok{0.0}\NormalTok{)}
    \ControlFlowTok{if}\NormalTok{ dark\_mask.}\BuiltInTok{max}\NormalTok{() }\OperatorTok{\textgreater{}} \DecValTok{0}\NormalTok{:}
\NormalTok{        dark\_mask }\OperatorTok{=}\NormalTok{ dark\_mask }\OperatorTok{/}\NormalTok{ dark\_mask.}\BuiltInTok{max}\NormalTok{()}
    
    \CommentTok{\# Downweight very light regions (I \textgreater{} extreme\_threshold\_high)}
\NormalTok{    light\_mask }\OperatorTok{=}\NormalTok{ np.exp(}\OperatorTok{{-}}\NormalTok{((I }\OperatorTok{{-}} \FloatTok{1.0}\NormalTok{) }\OperatorTok{**} \DecValTok{2}\NormalTok{) }\OperatorTok{/}\NormalTok{ (}\FloatTok{2.0} \OperatorTok{*}\NormalTok{ (extreme\_sigma }\OperatorTok{**} \DecValTok{2}\NormalTok{)))}
\NormalTok{    light\_mask }\OperatorTok{=}\NormalTok{ np.where(I }\OperatorTok{\textgreater{}}\NormalTok{ extreme\_threshold\_high, light\_mask, }\FloatTok{0.0}\NormalTok{)}
    \ControlFlowTok{if}\NormalTok{ light\_mask.}\BuiltInTok{max}\NormalTok{() }\OperatorTok{\textgreater{}} \DecValTok{0}\NormalTok{:}
\NormalTok{        light\_mask }\OperatorTok{=}\NormalTok{ light\_mask }\OperatorTok{/}\NormalTok{ light\_mask.}\BuiltInTok{max}\NormalTok{()}
    
    \CommentTok{\# Combine both masks}
\NormalTok{    extreme\_mask }\OperatorTok{=}\NormalTok{ np.maximum(dark\_mask, light\_mask)}
    
    \CommentTok{\# Apply smooth downweighting}
\NormalTok{    importance }\OperatorTok{=}\NormalTok{ I\_inverted }\OperatorTok{*}\NormalTok{ (}\FloatTok{1.0} \OperatorTok{{-}}\NormalTok{ extreme\_downweight }\OperatorTok{*}\NormalTok{ extreme\_mask)}
    
    \CommentTok{\# Add smooth gradual mid{-}tone boost (Gaussian centered on 0.65)}
\NormalTok{    mid\_tone\_center }\OperatorTok{=} \FloatTok{0.65}
\NormalTok{    mid\_tone\_gaussian }\OperatorTok{=}\NormalTok{ np.exp(}\OperatorTok{{-}}\NormalTok{((I }\OperatorTok{{-}}\NormalTok{ mid\_tone\_center) }\OperatorTok{**} \DecValTok{2}\NormalTok{) }\OperatorTok{/}\NormalTok{ (}\FloatTok{2.0} \OperatorTok{*}\NormalTok{ (mid\_tone\_sigma }\OperatorTok{**} \DecValTok{2}\NormalTok{)))}
    \ControlFlowTok{if}\NormalTok{ mid\_tone\_gaussian.}\BuiltInTok{max}\NormalTok{() }\OperatorTok{\textgreater{}} \DecValTok{0}\NormalTok{:}
\NormalTok{        mid\_tone\_gaussian }\OperatorTok{=}\NormalTok{ mid\_tone\_gaussian }\OperatorTok{/}\NormalTok{ mid\_tone\_gaussian.}\BuiltInTok{max}\NormalTok{()}
    
    \CommentTok{\# Boost importance in mid{-}tone regions}
\NormalTok{    importance }\OperatorTok{=}\NormalTok{ importance }\OperatorTok{*}\NormalTok{ (}\FloatTok{1.0} \OperatorTok{+}\NormalTok{ mid\_tone\_boost }\OperatorTok{*}\NormalTok{ mid\_tone\_gaussian)}
    
    \CommentTok{\# Normalize to [0,1]}
\NormalTok{    m, M }\OperatorTok{=}\NormalTok{ importance.}\BuiltInTok{min}\NormalTok{(), importance.}\BuiltInTok{max}\NormalTok{()}
    \ControlFlowTok{if}\NormalTok{ M }\OperatorTok{\textgreater{}}\NormalTok{ m: }
\NormalTok{        importance }\OperatorTok{=}\NormalTok{ (importance }\OperatorTok{{-}}\NormalTok{ m) }\OperatorTok{/}\NormalTok{ (M }\OperatorTok{{-}}\NormalTok{ m)}
    \ControlFlowTok{return}\NormalTok{ importance}
\end{Highlighting}
\end{Shaded}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{compute\_importance }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(gray\_img, }
                                \AttributeTok{extreme\_downweight =} \FloatTok{0.5}\NormalTok{,}
                                \AttributeTok{extreme\_threshold\_low =} \FloatTok{0.4}\NormalTok{,}
                                \AttributeTok{extreme\_threshold\_high =} \FloatTok{0.8}\NormalTok{,}
                                \AttributeTok{extreme\_sigma =} \FloatTok{0.1}\NormalTok{,}
                                \AttributeTok{mid\_tone\_boost =} \FloatTok{0.4}\NormalTok{,}
                                \AttributeTok{mid\_tone\_sigma =} \FloatTok{0.2}\NormalTok{) \{}
  \CommentTok{\# Clip image to [0, 1]}
\NormalTok{  I }\OtherTok{\textless{}{-}} \FunctionTok{pmax}\NormalTok{(}\FunctionTok{pmin}\NormalTok{(gray\_img, }\FloatTok{1.0}\NormalTok{), }\FloatTok{0.0}\NormalTok{)}
  
  \CommentTok{\# Invert brightness}
\NormalTok{  I\_inverted }\OtherTok{\textless{}{-}} \FloatTok{1.0} \SpecialCharTok{{-}}\NormalTok{ I}
  
  \CommentTok{\# Dark mask}
\NormalTok{  dark\_mask }\OtherTok{\textless{}{-}} \FunctionTok{exp}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{((I }\SpecialCharTok{{-}} \FloatTok{0.0}\NormalTok{)}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ (}\FloatTok{2.0} \SpecialCharTok{*}\NormalTok{ (extreme\_sigma}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{)))}
\NormalTok{  dark\_mask[I }\SpecialCharTok{\textgreater{}=}\NormalTok{ extreme\_threshold\_low] }\OtherTok{\textless{}{-}} \FloatTok{0.0}
  \ControlFlowTok{if}\NormalTok{(}\FunctionTok{max}\NormalTok{(dark\_mask) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
\NormalTok{    dark\_mask }\OtherTok{\textless{}{-}}\NormalTok{ dark\_mask }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(dark\_mask)}
\NormalTok{  \}}
  
  \CommentTok{\# Light mask}
\NormalTok{  light\_mask }\OtherTok{\textless{}{-}} \FunctionTok{exp}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{((I }\SpecialCharTok{{-}} \FloatTok{1.0}\NormalTok{)}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ (}\FloatTok{2.0} \SpecialCharTok{*}\NormalTok{ (extreme\_sigma}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{)))}
\NormalTok{  light\_mask[I }\SpecialCharTok{\textless{}=}\NormalTok{ extreme\_threshold\_high] }\OtherTok{\textless{}{-}} \FloatTok{0.0}
  \ControlFlowTok{if}\NormalTok{(}\FunctionTok{max}\NormalTok{(light\_mask) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
\NormalTok{    light\_mask }\OtherTok{\textless{}{-}}\NormalTok{ light\_mask }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(light\_mask)}
\NormalTok{  \}}
  
  \CommentTok{\# Combine masks}
\NormalTok{  extreme\_mask }\OtherTok{\textless{}{-}} \FunctionTok{pmax}\NormalTok{(dark\_mask, light\_mask)}
  
  \CommentTok{\# Apply downweighting}
\NormalTok{  importance }\OtherTok{\textless{}{-}}\NormalTok{ I\_inverted }\SpecialCharTok{*}\NormalTok{ (}\FloatTok{1.0} \SpecialCharTok{{-}}\NormalTok{ extreme\_downweight }\SpecialCharTok{*}\NormalTok{ extreme\_mask)}
  
  \CommentTok{\# Mid{-}tone boost}
\NormalTok{  mid\_tone\_center }\OtherTok{\textless{}{-}} \FloatTok{0.65}
\NormalTok{  mid\_tone\_gaussian }\OtherTok{\textless{}{-}} \FunctionTok{exp}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{((I }\SpecialCharTok{{-}}\NormalTok{ mid\_tone\_center)}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ (}\FloatTok{2.0} \SpecialCharTok{*}\NormalTok{ (mid\_tone\_sigma}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{)))}
  \ControlFlowTok{if}\NormalTok{(}\FunctionTok{max}\NormalTok{(mid\_tone\_gaussian) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
\NormalTok{    mid\_tone\_gaussian }\OtherTok{\textless{}{-}}\NormalTok{ mid\_tone\_gaussian }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(mid\_tone\_gaussian)}
\NormalTok{  \}}
  
\NormalTok{  importance }\OtherTok{\textless{}{-}}\NormalTok{ importance }\SpecialCharTok{*}\NormalTok{ (}\FloatTok{1.0} \SpecialCharTok{+}\NormalTok{ mid\_tone\_boost }\SpecialCharTok{*}\NormalTok{ mid\_tone\_gaussian)}
  
  \CommentTok{\# Normalize}
\NormalTok{  m }\OtherTok{\textless{}{-}} \FunctionTok{min}\NormalTok{(importance)}
\NormalTok{  M }\OtherTok{\textless{}{-}} \FunctionTok{max}\NormalTok{(importance)}
  \ControlFlowTok{if}\NormalTok{(M }\SpecialCharTok{\textgreater{}}\NormalTok{ m) \{}
\NormalTok{    importance }\OtherTok{\textless{}{-}}\NormalTok{ (importance }\SpecialCharTok{{-}}\NormalTok{ m) }\SpecialCharTok{/}\NormalTok{ (M }\SpecialCharTok{{-}}\NormalTok{ m)}
\NormalTok{  \}}
  
  \FunctionTok{return}\NormalTok{(importance)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{Blue Noise Stippling
Algorithm}\label{blue-noise-stippling-algorithm}

The stippling algorithm uses a modified void-and-cluster approach that:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Creates an importance map that identifies visually important regions
\item
  Initializes an energy field based on the importance map (higher
  importance â†’ lower energy)
\item
  Uses a toroidal (periodic) Gaussian kernel for repulsion to ensure
  blue noise properties
\item
  Iteratively selects points with minimum energy
\item
  Adds Gaussian ``splats'' around selected points to prevent clustering
\item
  Balances image content importance with blue noise spatial distribution
\end{enumerate}

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}

\KeywordTok{def}\NormalTok{ toroidal\_gaussian\_kernel(h: }\BuiltInTok{int}\NormalTok{, w: }\BuiltInTok{int}\NormalTok{, sigma: }\BuiltInTok{float}\NormalTok{):}
    \CommentTok{"""}
\CommentTok{    Create a periodic (toroidal) 2D Gaussian kernel centered at (0,0).}
\CommentTok{    The toroidal property means the kernel wraps around at the edges,}
\CommentTok{    ensuring consistent repulsion behavior regardless of point location.}
\CommentTok{    """}
\NormalTok{    y }\OperatorTok{=}\NormalTok{ np.arange(h)}
\NormalTok{    x }\OperatorTok{=}\NormalTok{ np.arange(w)}
    \CommentTok{\# Compute toroidal distances (minimum distance considering wrapping)}
\NormalTok{    dy }\OperatorTok{=}\NormalTok{ np.minimum(y, h }\OperatorTok{{-}}\NormalTok{ y)[:, }\VariableTok{None}\NormalTok{]}
\NormalTok{    dx }\OperatorTok{=}\NormalTok{ np.minimum(x, w }\OperatorTok{{-}}\NormalTok{ x)[}\VariableTok{None}\NormalTok{, :]}
    \CommentTok{\# Compute Gaussian}
\NormalTok{    kern }\OperatorTok{=}\NormalTok{ np.exp(}\OperatorTok{{-}}\NormalTok{(dx}\OperatorTok{**}\DecValTok{2} \OperatorTok{+}\NormalTok{ dy}\OperatorTok{**}\DecValTok{2}\NormalTok{) }\OperatorTok{/}\NormalTok{ (}\FloatTok{2.0} \OperatorTok{*}\NormalTok{ sigma}\OperatorTok{**}\DecValTok{2}\NormalTok{))}
\NormalTok{    s }\OperatorTok{=}\NormalTok{ kern.}\BuiltInTok{sum}\NormalTok{()}
    \ControlFlowTok{if}\NormalTok{ s }\OperatorTok{\textgreater{}} \DecValTok{0}\NormalTok{:}
\NormalTok{        kern }\OperatorTok{/=}\NormalTok{ s  }\CommentTok{\# Normalize}
    \ControlFlowTok{return}\NormalTok{ kern}


\KeywordTok{def}\NormalTok{ void\_and\_cluster(}
\NormalTok{    input\_img: np.ndarray,}
\NormalTok{    percentage: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.08}\NormalTok{,}
\NormalTok{    sigma: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.9}\NormalTok{,}
\NormalTok{    content\_bias: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.9}\NormalTok{,}
\NormalTok{    importance\_img: np.ndarray }\OperatorTok{|} \VariableTok{None} \OperatorTok{=} \VariableTok{None}\NormalTok{,}
\NormalTok{    noise\_scale\_factor: }\BuiltInTok{float} \OperatorTok{=} \FloatTok{0.1}\NormalTok{,}
\NormalTok{):}
    \CommentTok{"""}
\CommentTok{    Generate blue noise stippling pattern from input image using a modified}
\CommentTok{    void{-}and{-}cluster algorithm with content{-}weighted importance.}
\CommentTok{    """}
\NormalTok{    I }\OperatorTok{=}\NormalTok{ np.clip(input\_img, }\FloatTok{0.0}\NormalTok{, }\FloatTok{1.0}\NormalTok{)}
\NormalTok{    h, w }\OperatorTok{=}\NormalTok{ I.shape}

    \CommentTok{\# Compute or use provided importance map}
    \ControlFlowTok{if}\NormalTok{ importance\_img }\KeywordTok{is} \VariableTok{None}\NormalTok{:}
\NormalTok{        importance }\OperatorTok{=}\NormalTok{ compute\_importance(I)}
    \ControlFlowTok{else}\NormalTok{:}
\NormalTok{        importance }\OperatorTok{=}\NormalTok{ np.clip(importance\_img, }\FloatTok{0.0}\NormalTok{, }\FloatTok{1.0}\NormalTok{)}

    \CommentTok{\# Create toroidal Gaussian kernel for repulsion}
\NormalTok{    kernel }\OperatorTok{=}\NormalTok{ toroidal\_gaussian\_kernel(h, w, sigma)}

    \CommentTok{\# Initialize energy field: lower energy â†’ more likely to be picked}
\NormalTok{    energy\_current }\OperatorTok{=} \OperatorTok{{-}}\NormalTok{importance }\OperatorTok{*}\NormalTok{ content\_bias}

    \CommentTok{\# Stipple buffer: start with white background; selected points become black dots}
\NormalTok{    final\_stipple }\OperatorTok{=}\NormalTok{ np.ones\_like(I)}
\NormalTok{    samples }\OperatorTok{=}\NormalTok{ []}

    \CommentTok{\# Helper function to roll kernel to an arbitrary position}
    \KeywordTok{def}\NormalTok{ energy\_splat(y, x):}
        \CommentTok{"""Get energy contribution by rolling the kernel to position (y, x)."""}
        \ControlFlowTok{return}\NormalTok{ np.roll(np.roll(kernel, shift}\OperatorTok{=}\NormalTok{y, axis}\OperatorTok{=}\DecValTok{0}\NormalTok{), shift}\OperatorTok{=}\NormalTok{x, axis}\OperatorTok{=}\DecValTok{1}\NormalTok{)}

    \CommentTok{\# Number of points to select}
\NormalTok{    num\_points }\OperatorTok{=} \BuiltInTok{int}\NormalTok{(I.size }\OperatorTok{*}\NormalTok{ percentage)}

    \CommentTok{\# Choose first point near center with minimal energy}
\NormalTok{    cy, cx }\OperatorTok{=}\NormalTok{ h }\OperatorTok{//} \DecValTok{2}\NormalTok{, w }\OperatorTok{//} \DecValTok{2}
\NormalTok{    r }\OperatorTok{=} \BuiltInTok{min}\NormalTok{(}\DecValTok{20}\NormalTok{, h }\OperatorTok{//} \DecValTok{10}\NormalTok{, w }\OperatorTok{//} \DecValTok{10}\NormalTok{)}
\NormalTok{    ys }\OperatorTok{=} \BuiltInTok{slice}\NormalTok{(}\BuiltInTok{max}\NormalTok{(}\DecValTok{0}\NormalTok{, cy }\OperatorTok{{-}}\NormalTok{ r), }\BuiltInTok{min}\NormalTok{(h, cy }\OperatorTok{+}\NormalTok{ r))}
\NormalTok{    xs }\OperatorTok{=} \BuiltInTok{slice}\NormalTok{(}\BuiltInTok{max}\NormalTok{(}\DecValTok{0}\NormalTok{, cx }\OperatorTok{{-}}\NormalTok{ r), }\BuiltInTok{min}\NormalTok{(w, cx }\OperatorTok{+}\NormalTok{ r))}
\NormalTok{    region }\OperatorTok{=}\NormalTok{ energy\_current[ys, xs]}
\NormalTok{    flat }\OperatorTok{=}\NormalTok{ np.argmin(region)}
\NormalTok{    y0 }\OperatorTok{=}\NormalTok{ flat }\OperatorTok{//}\NormalTok{ (region.shape[}\DecValTok{1}\NormalTok{]) }\OperatorTok{+}\NormalTok{ (cy }\OperatorTok{{-}}\NormalTok{ r)}
\NormalTok{    x0 }\OperatorTok{=}\NormalTok{ flat }\OperatorTok{\%}\NormalTok{ (region.shape[}\DecValTok{1}\NormalTok{]) }\OperatorTok{+}\NormalTok{ (cx }\OperatorTok{{-}}\NormalTok{ r)}

    \CommentTok{\# Place first point}
\NormalTok{    energy\_current }\OperatorTok{=}\NormalTok{ energy\_current }\OperatorTok{+}\NormalTok{ energy\_splat(y0, x0)}
\NormalTok{    energy\_current[y0, x0] }\OperatorTok{=}\NormalTok{ np.inf  }\CommentTok{\# Prevent reselection}
\NormalTok{    samples.append((y0, x0, I[y0, x0]))}
\NormalTok{    final\_stipple[y0, x0] }\OperatorTok{=} \FloatTok{0.0}  \CommentTok{\# Black dot}

    \CommentTok{\# Iteratively place remaining points}
    \ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(}\DecValTok{1}\NormalTok{, num\_points):}
        \CommentTok{\# Add exploration noise that decreases over time}
\NormalTok{        exploration }\OperatorTok{=} \FloatTok{1.0} \OperatorTok{{-}}\NormalTok{ (i }\OperatorTok{/}\NormalTok{ num\_points) }\OperatorTok{*} \FloatTok{0.5}  \CommentTok{\# Decrease from 1.0 to 0.5}
\NormalTok{        noise }\OperatorTok{=}\NormalTok{ np.random.normal(}\FloatTok{0.0}\NormalTok{, noise\_scale\_factor }\OperatorTok{*}\NormalTok{ content\_bias }\OperatorTok{*}\NormalTok{ exploration, size}\OperatorTok{=}\NormalTok{energy\_current.shape)}
\NormalTok{        energy\_with\_noise }\OperatorTok{=}\NormalTok{ energy\_current }\OperatorTok{+}\NormalTok{ noise}

        \CommentTok{\# Find position with minimum energy (with noise for exploration)}
\NormalTok{        pos\_flat }\OperatorTok{=}\NormalTok{ np.argmin(energy\_with\_noise)}
\NormalTok{        y }\OperatorTok{=}\NormalTok{ pos\_flat }\OperatorTok{//}\NormalTok{ w}
\NormalTok{        x }\OperatorTok{=}\NormalTok{ pos\_flat }\OperatorTok{\%}\NormalTok{ w}

        \CommentTok{\# Add Gaussian splat to prevent nearby points from being selected}
\NormalTok{        energy\_current }\OperatorTok{=}\NormalTok{ energy\_current }\OperatorTok{+}\NormalTok{ energy\_splat(y, x)}
\NormalTok{        energy\_current[y, x] }\OperatorTok{=}\NormalTok{ np.inf  }\CommentTok{\# Prevent reselection}

        \CommentTok{\# Record the sample}
\NormalTok{        samples.append((y, x, I[y, x]))}
\NormalTok{        final\_stipple[y, x] }\OperatorTok{=} \FloatTok{0.0}  \CommentTok{\# Black dot}

    \ControlFlowTok{return}\NormalTok{ final\_stipple, np.array(samples)}
\end{Highlighting}
\end{Shaded}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Note: R implementation uses true 2D circular shift (roll2d) to match Python\textquotesingle{}s np.roll behavior}

\NormalTok{toroidal\_gaussian\_kernel }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(h, w, sigma) \{}
\NormalTok{  y }\OtherTok{\textless{}{-}} \DecValTok{0}\SpecialCharTok{:}\NormalTok{(h}\DecValTok{{-}1}\NormalTok{)}
\NormalTok{  x }\OtherTok{\textless{}{-}} \DecValTok{0}\SpecialCharTok{:}\NormalTok{(w}\DecValTok{{-}1}\NormalTok{)}
  
  \CommentTok{\# Compute toroidal distances}
\NormalTok{  dy }\OtherTok{\textless{}{-}} \FunctionTok{pmin}\NormalTok{(y, h }\SpecialCharTok{{-}}\NormalTok{ y)}
\NormalTok{  dx }\OtherTok{\textless{}{-}} \FunctionTok{pmin}\NormalTok{(x, w }\SpecialCharTok{{-}}\NormalTok{ x)}
  
  \CommentTok{\# Create distance matrices}
  \CommentTok{\# each row gets same dy, each col gets same dx}
\NormalTok{  dy\_mat }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{rep}\NormalTok{(dy, }\AttributeTok{each =}\NormalTok{ w), }\AttributeTok{nrow =}\NormalTok{ h, }\AttributeTok{ncol =}\NormalTok{ w)}
\NormalTok{  dx\_mat }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{rep}\NormalTok{(dx, }\AttributeTok{times =}\NormalTok{ h), }\AttributeTok{nrow =}\NormalTok{ h, }\AttributeTok{ncol =}\NormalTok{ w)}
  
  \CommentTok{\# Compute Gaussian}
\NormalTok{  kern }\OtherTok{\textless{}{-}} \FunctionTok{exp}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{(dx\_mat}\SpecialCharTok{\^{}}\DecValTok{2} \SpecialCharTok{+}\NormalTok{ dy\_mat}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ (}\FloatTok{2.0} \SpecialCharTok{*}\NormalTok{ sigma}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{))}
\NormalTok{  kern }\OtherTok{\textless{}{-}}\NormalTok{ kern }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(kern)  }\CommentTok{\# Normalize}
  
  \FunctionTok{return}\NormalTok{(kern)}
\NormalTok{\}}

\CommentTok{\# Helper function for true 2D circular shift (equivalent to np.roll)}
\CommentTok{\# np.roll equivalent: positive shift moves down/right}
\NormalTok{roll2d }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(mat, }\AttributeTok{shift\_y =} \DecValTok{0}\NormalTok{, }\AttributeTok{shift\_x =} \DecValTok{0}\NormalTok{) \{}
\NormalTok{  h }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(mat)}
\NormalTok{  w }\OtherTok{\textless{}{-}} \FunctionTok{ncol}\NormalTok{(mat)}
\NormalTok{  sy }\OtherTok{\textless{}{-}}\NormalTok{ ((shift\_y }\SpecialCharTok{\%\%}\NormalTok{ h) }\SpecialCharTok{+}\NormalTok{ h) }\SpecialCharTok{\%\%}\NormalTok{ h}
\NormalTok{  sx }\OtherTok{\textless{}{-}}\NormalTok{ ((shift\_x }\SpecialCharTok{\%\%}\NormalTok{ w) }\SpecialCharTok{+}\NormalTok{ w) }\SpecialCharTok{\%\%}\NormalTok{ w}
\NormalTok{  rows }\OtherTok{\textless{}{-}} \ControlFlowTok{if}\NormalTok{ (sy }\SpecialCharTok{==} \DecValTok{0}\NormalTok{) }\DecValTok{1}\SpecialCharTok{:}\NormalTok{h }\ControlFlowTok{else} \FunctionTok{c}\NormalTok{((h }\SpecialCharTok{{-}}\NormalTok{ sy }\SpecialCharTok{+} \DecValTok{1}\NormalTok{)}\SpecialCharTok{:}\NormalTok{h, }\DecValTok{1}\SpecialCharTok{:}\NormalTok{(h }\SpecialCharTok{{-}}\NormalTok{ sy))}
\NormalTok{  cols }\OtherTok{\textless{}{-}} \ControlFlowTok{if}\NormalTok{ (sx }\SpecialCharTok{==} \DecValTok{0}\NormalTok{) }\DecValTok{1}\SpecialCharTok{:}\NormalTok{w }\ControlFlowTok{else} \FunctionTok{c}\NormalTok{((w }\SpecialCharTok{{-}}\NormalTok{ sx }\SpecialCharTok{+} \DecValTok{1}\NormalTok{)}\SpecialCharTok{:}\NormalTok{w, }\DecValTok{1}\SpecialCharTok{:}\NormalTok{(w }\SpecialCharTok{{-}}\NormalTok{ sx))}
\NormalTok{  mat[rows, cols, drop }\OtherTok{=} \ConstantTok{FALSE}\NormalTok{]}
\NormalTok{\}}

\NormalTok{void\_and\_cluster }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(input\_img, }
                             \AttributeTok{percentage =} \FloatTok{0.08}\NormalTok{,}
                             \AttributeTok{sigma =} \FloatTok{0.9}\NormalTok{,}
                             \AttributeTok{content\_bias =} \FloatTok{0.9}\NormalTok{,}
                             \AttributeTok{importance\_img =} \ConstantTok{NULL}\NormalTok{,}
                             \AttributeTok{noise\_scale\_factor =} \FloatTok{0.1}\NormalTok{) \{}
  \CommentTok{\# Clip image to [0, 1]}
\NormalTok{  I }\OtherTok{\textless{}{-}} \FunctionTok{pmax}\NormalTok{(}\FunctionTok{pmin}\NormalTok{(input\_img, }\FloatTok{1.0}\NormalTok{), }\FloatTok{0.0}\NormalTok{)}
\NormalTok{  h }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(I)}
\NormalTok{  w }\OtherTok{\textless{}{-}} \FunctionTok{ncol}\NormalTok{(I)}
  
  \CommentTok{\# Compute or use provided importance map}
  \ControlFlowTok{if}\NormalTok{(}\FunctionTok{is.null}\NormalTok{(importance\_img)) \{}
\NormalTok{    importance }\OtherTok{\textless{}{-}} \FunctionTok{compute\_importance}\NormalTok{(I)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{    importance }\OtherTok{\textless{}{-}} \FunctionTok{pmax}\NormalTok{(}\FunctionTok{pmin}\NormalTok{(importance\_img, }\FloatTok{1.0}\NormalTok{), }\FloatTok{0.0}\NormalTok{)}
\NormalTok{  \}}
  
  \CommentTok{\# Create toroidal Gaussian kernel for repulsion}
\NormalTok{  kernel }\OtherTok{\textless{}{-}} \FunctionTok{toroidal\_gaussian\_kernel}\NormalTok{(h, w, sigma)}
  
  \CommentTok{\# Initialize energy field: lower energy â†’ more likely to be picked}
\NormalTok{  energy\_current }\OtherTok{\textless{}{-}} \SpecialCharTok{{-}}\NormalTok{importance }\SpecialCharTok{*}\NormalTok{ content\_bias}
  
  \CommentTok{\# Stipple buffer: start with white background; selected points become black dots}
\NormalTok{  final\_stipple }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FloatTok{1.0}\NormalTok{, }\AttributeTok{nrow =}\NormalTok{ h, }\AttributeTok{ncol =}\NormalTok{ w)}
\NormalTok{  samples }\OtherTok{\textless{}{-}} \FunctionTok{vector}\NormalTok{(}\StringTok{"list"}\NormalTok{, }\FunctionTok{as.integer}\NormalTok{(h }\SpecialCharTok{*}\NormalTok{ w }\SpecialCharTok{*}\NormalTok{ percentage))}
  
  \CommentTok{\# Helper function to roll kernel to an arbitrary position}
  \CommentTok{\# This implements the exact equivalent of Python\textquotesingle{}s np.roll(kernel, shift=y, axis=0) }
  \CommentTok{\# followed by np.roll(kernel, shift=x, axis=1)}
  \CommentTok{\# Uses true 2D circular shift to preserve directionality and avoid quadrant{-}mirroring}
\NormalTok{  energy\_splat }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(y, x) \{}
    \CommentTok{\# exact np.roll(kernel, y; x)}
    \FunctionTok{roll2d}\NormalTok{(kernel, }\AttributeTok{shift\_y =}\NormalTok{ y }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{, }\AttributeTok{shift\_x =}\NormalTok{ x }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{)}
\NormalTok{  \}}
  
  \CommentTok{\# Number of points to select}
\NormalTok{  num\_points }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(h }\SpecialCharTok{*}\NormalTok{ w }\SpecialCharTok{*}\NormalTok{ percentage)}
  
  \CommentTok{\# Set seed for reproducibility}
  \FunctionTok{set.seed}\NormalTok{(}\DecValTok{42}\NormalTok{)}
  
  \CommentTok{\# {-}{-}{-} first point: pick min in a center window {-}{-}{-}}
\NormalTok{  cy }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(h }\SpecialCharTok{/} \DecValTok{2}\NormalTok{)}
\NormalTok{  cx }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(w }\SpecialCharTok{/} \DecValTok{2}\NormalTok{)}
\NormalTok{  r }\OtherTok{\textless{}{-}} \FunctionTok{min}\NormalTok{(}\DecValTok{20}\NormalTok{L, }\FunctionTok{as.integer}\NormalTok{(h }\SpecialCharTok{/} \DecValTok{10}\NormalTok{), }\FunctionTok{as.integer}\NormalTok{(w }\SpecialCharTok{/} \DecValTok{10}\NormalTok{))}
\NormalTok{  y\_start }\OtherTok{\textless{}{-}} \FunctionTok{max}\NormalTok{(}\DecValTok{1}\NormalTok{L, cy }\SpecialCharTok{{-}}\NormalTok{ r)}
\NormalTok{  y\_end }\OtherTok{\textless{}{-}} \FunctionTok{min}\NormalTok{(h, cy }\SpecialCharTok{+}\NormalTok{ r)}
\NormalTok{  x\_start }\OtherTok{\textless{}{-}} \FunctionTok{max}\NormalTok{(}\DecValTok{1}\NormalTok{L, cx }\SpecialCharTok{{-}}\NormalTok{ r)}
\NormalTok{  x\_end }\OtherTok{\textless{}{-}} \FunctionTok{min}\NormalTok{(w, cx }\SpecialCharTok{+}\NormalTok{ r)}
  
\NormalTok{  region }\OtherTok{\textless{}{-}}\NormalTok{ energy\_current[y\_start}\SpecialCharTok{:}\NormalTok{y\_end, x\_start}\SpecialCharTok{:}\NormalTok{x\_end]}
\NormalTok{  flat\_idx }\OtherTok{\textless{}{-}} \FunctionTok{which.min}\NormalTok{(region)}
  
  \CommentTok{\# IMPORTANT: R is column{-}major {-}\textgreater{} (y,x) from flat:}
  \CommentTok{\# y = ((idx{-}1) \%\% nrow) + 1 ; x = ((idx{-}1) \%/\% nrow) + 1}
\NormalTok{  ry }\OtherTok{\textless{}{-}}\NormalTok{ ((flat\_idx }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{\%\%} \FunctionTok{nrow}\NormalTok{(region)) }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{  rx }\OtherTok{\textless{}{-}}\NormalTok{ ((flat\_idx }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{\%/\%} \FunctionTok{nrow}\NormalTok{(region)) }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{  y0 }\OtherTok{\textless{}{-}}\NormalTok{ y\_start }\SpecialCharTok{+}\NormalTok{ ry }\SpecialCharTok{{-}} \DecValTok{1}
\NormalTok{  x0 }\OtherTok{\textless{}{-}}\NormalTok{ x\_start }\SpecialCharTok{+}\NormalTok{ rx }\SpecialCharTok{{-}} \DecValTok{1}
  
  \CommentTok{\# Place first point}
\NormalTok{  energy\_current }\OtherTok{\textless{}{-}}\NormalTok{ energy\_current }\SpecialCharTok{+} \FunctionTok{energy\_splat}\NormalTok{(y0, x0)}
\NormalTok{  energy\_current[y0, x0] }\OtherTok{\textless{}{-}} \ConstantTok{Inf}  \CommentTok{\# Prevent reselection}
\NormalTok{  samples[[}\DecValTok{1}\NormalTok{]] }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(y0, x0, I[y0, x0])}
\NormalTok{  final\_stipple[y0, x0] }\OtherTok{\textless{}{-}} \FloatTok{0.0}  \CommentTok{\# Black dot}
  
  \CommentTok{\# {-}{-}{-} iterate {-}{-}{-}}
  \ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{2}\SpecialCharTok{:}\NormalTok{num\_points) \{}
    \CommentTok{\# Add exploration noise that decreases over time}
\NormalTok{    exploration }\OtherTok{\textless{}{-}} \FloatTok{1.0} \SpecialCharTok{{-}}\NormalTok{ ((i }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ num\_points) }\SpecialCharTok{*} \FloatTok{0.5}  \CommentTok{\# Decrease from 1.0 to 0.5}
\NormalTok{    noise }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{rnorm}\NormalTok{(h }\SpecialCharTok{*}\NormalTok{ w, }\DecValTok{0}\NormalTok{, noise\_scale\_factor }\SpecialCharTok{*}\NormalTok{ content\_bias }\SpecialCharTok{*}\NormalTok{ exploration), }
                    \AttributeTok{nrow =}\NormalTok{ h, }\AttributeTok{ncol =}\NormalTok{ w)}
\NormalTok{    energy\_with\_noise }\OtherTok{\textless{}{-}}\NormalTok{ energy\_current }\SpecialCharTok{+}\NormalTok{ noise}
    
    \CommentTok{\# Find position with minimum energy (with noise for exploration)}
\NormalTok{    pos\_flat }\OtherTok{\textless{}{-}} \FunctionTok{which.min}\NormalTok{(energy\_with\_noise)}
    
    \CommentTok{\# Column{-}major unflatten:}
    \CommentTok{\# R matrices are column{-}major, so y = (idx{-}1) \%\% h + 1, x = (idx{-}1) \%/\% h + 1}
\NormalTok{    y }\OtherTok{\textless{}{-}}\NormalTok{ ((pos\_flat }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{\%\%}\NormalTok{ h) }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{    x }\OtherTok{\textless{}{-}}\NormalTok{ ((pos\_flat }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{\%/\%}\NormalTok{ h) }\SpecialCharTok{+} \DecValTok{1}
    
    \CommentTok{\# Add Gaussian splat to prevent nearby points from being selected}
\NormalTok{    energy\_current }\OtherTok{\textless{}{-}}\NormalTok{ energy\_current }\SpecialCharTok{+} \FunctionTok{energy\_splat}\NormalTok{(y, x)}
\NormalTok{    energy\_current[y, x] }\OtherTok{\textless{}{-}} \ConstantTok{Inf}  \CommentTok{\# Prevent reselection}
    
    \CommentTok{\# Record the sample}
\NormalTok{    samples[[i]] }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(y, x, I[y, x])}
\NormalTok{    final\_stipple[y, x] }\OtherTok{\textless{}{-}} \FloatTok{0.0}  \CommentTok{\# Black dot}
\NormalTok{  \}}
  
  \CommentTok{\# Convert samples list to matrix}
\NormalTok{  samples\_matrix }\OtherTok{\textless{}{-}} \FunctionTok{do.call}\NormalTok{(rbind, samples[}\DecValTok{1}\SpecialCharTok{:}\NormalTok{num\_points])}
  
  \FunctionTok{return}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\AttributeTok{stipple =}\NormalTok{ final\_stipple, }\AttributeTok{samples =}\NormalTok{ samples\_matrix))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{Preparing the Working
Image}\label{preparing-the-working-image}

Before generating the stippling pattern, we prepare the image by
resizing if necessary and computing the importance map.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Resize image if it\textquotesingle{}s too large for faster processing}
\NormalTok{max\_size }\OperatorTok{=} \DecValTok{512}
\ControlFlowTok{if}\NormalTok{ img\_array.shape[}\DecValTok{0}\NormalTok{] }\OperatorTok{\textgreater{}}\NormalTok{ max\_size }\KeywordTok{or}\NormalTok{ img\_array.shape[}\DecValTok{1}\NormalTok{] }\OperatorTok{\textgreater{}}\NormalTok{ max\_size:}
\NormalTok{    scale }\OperatorTok{=}\NormalTok{ max\_size }\OperatorTok{/} \BuiltInTok{max}\NormalTok{(img\_array.shape[}\DecValTok{0}\NormalTok{], img\_array.shape[}\DecValTok{1}\NormalTok{])}
\NormalTok{    new\_size }\OperatorTok{=}\NormalTok{ (}\BuiltInTok{int}\NormalTok{(img\_array.shape[}\DecValTok{1}\NormalTok{] }\OperatorTok{*}\NormalTok{ scale), }\BuiltInTok{int}\NormalTok{(img\_array.shape[}\DecValTok{0}\NormalTok{] }\OperatorTok{*}\NormalTok{ scale))}
\NormalTok{    img\_resized\_pil }\OperatorTok{=}\NormalTok{ original\_img.resize(new\_size, Image.Resampling.LANCZOS)}
    \ControlFlowTok{if}\NormalTok{ img\_resized\_pil.mode }\OperatorTok{!=} \StringTok{\textquotesingle{}L\textquotesingle{}}\NormalTok{:}
\NormalTok{        img\_resized\_pil }\OperatorTok{=}\NormalTok{ img\_resized\_pil.convert(}\StringTok{\textquotesingle{}L\textquotesingle{}}\NormalTok{)}
\NormalTok{    img\_resized }\OperatorTok{=}\NormalTok{ np.array(img\_resized\_pil, dtype}\OperatorTok{=}\NormalTok{np.float32) }\OperatorTok{/} \FloatTok{255.0}
    \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Resized image from }\SpecialCharTok{\{}\NormalTok{img\_array}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{ to }\SpecialCharTok{\{}\NormalTok{img\_resized}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{ for processing"}\NormalTok{)}
\ControlFlowTok{else}\NormalTok{:}
\NormalTok{    img\_resized }\OperatorTok{=}\NormalTok{ img\_array.copy()}

\CommentTok{\# Ensure img\_resized is 2D grayscale}
\ControlFlowTok{if} \BuiltInTok{len}\NormalTok{(img\_resized.shape) }\OperatorTok{\textgreater{}} \DecValTok{2}\NormalTok{:}
\NormalTok{    img\_resized }\OperatorTok{=}\NormalTok{ img\_resized[:, :, }\DecValTok{0}\NormalTok{]}
\ControlFlowTok{elif} \BuiltInTok{len}\NormalTok{(img\_resized.shape) }\OperatorTok{==} \DecValTok{2}\NormalTok{:}
    \ControlFlowTok{pass}
\ControlFlowTok{else}\NormalTok{:}
    \ControlFlowTok{raise} \PreprocessorTok{ValueError}\NormalTok{(}\SpecialStringTok{f"Unexpected image shape: }\SpecialCharTok{\{}\NormalTok{img\_resized}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{"}\NormalTok{)}

\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Final image shape: }\SpecialCharTok{\{}\NormalTok{img\_resized}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{ (should be 2D for grayscale)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Final image shape: (375, 250) (should be 2D for grayscale)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Compute importance map using default parameters}
\NormalTok{importance\_map }\OperatorTok{=}\NormalTok{ compute\_importance(}
\NormalTok{    img\_resized,}
\NormalTok{    extreme\_downweight}\OperatorTok{=}\FloatTok{0.5}\NormalTok{,}
\NormalTok{    extreme\_threshold\_low}\OperatorTok{=}\FloatTok{0.2}\NormalTok{,}
\NormalTok{    extreme\_threshold\_high}\OperatorTok{=}\FloatTok{0.8}\NormalTok{,}
\NormalTok{    extreme\_sigma}\OperatorTok{=}\FloatTok{0.1}
\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Importance map computed"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Importance map computed
\end{verbatim}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Resize image if needed}
\NormalTok{max\_size }\OtherTok{\textless{}{-}} \DecValTok{512}
\NormalTok{img\_dims }\OtherTok{\textless{}{-}} \FunctionTok{dim}\NormalTok{(original\_img)}
\ControlFlowTok{if}\NormalTok{(img\_dims[}\DecValTok{1}\NormalTok{] }\SpecialCharTok{\textgreater{}}\NormalTok{ max\_size }\SpecialCharTok{||}\NormalTok{ img\_dims[}\DecValTok{2}\NormalTok{] }\SpecialCharTok{\textgreater{}}\NormalTok{ max\_size) \{}
\NormalTok{  scale }\OtherTok{\textless{}{-}}\NormalTok{ max\_size }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(img\_dims[}\DecValTok{1}\NormalTok{], img\_dims[}\DecValTok{2}\NormalTok{])}
\NormalTok{  new\_size }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FunctionTok{round}\NormalTok{(img\_dims[}\DecValTok{1}\NormalTok{] }\SpecialCharTok{*}\NormalTok{ scale), }\FunctionTok{round}\NormalTok{(img\_dims[}\DecValTok{2}\NormalTok{] }\SpecialCharTok{*}\NormalTok{ scale))}
\NormalTok{  img\_resized }\OtherTok{\textless{}{-}} \FunctionTok{resize}\NormalTok{(original\_img, new\_size[}\DecValTok{1}\NormalTok{], new\_size[}\DecValTok{2}\NormalTok{])}
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Resized image to"}\NormalTok{, new\_size[}\DecValTok{1}\NormalTok{], }\StringTok{"x"}\NormalTok{, new\_size[}\DecValTok{2}\NormalTok{], }\StringTok{"for processing}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{  img\_resized }\OtherTok{\textless{}{-}}\NormalTok{ original\_img}
\NormalTok{\}}

\CommentTok{\# Convert to matrix and normalize}
\CommentTok{\# imager uses (x,y,cc,z) = (width, height, channels, depth)}
\CommentTok{\# but R matrices use (row, col) = (y, x)}
\CommentTok{\# Extract grayscale plane and transpose to get [h, w] orientation}
\NormalTok{arr }\OtherTok{\textless{}{-}} \FunctionTok{as.array}\NormalTok{(img\_resized)          }\CommentTok{\# dims: [x, y, cc, z] = [w, h, 1, 1]}
\NormalTok{img\_matrix }\OtherTok{\textless{}{-}} \FunctionTok{t}\NormalTok{(arr[,,}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{])           }\CommentTok{\# now dims: [h, w]  (row=y, col=x)}
\NormalTok{img\_matrix }\OtherTok{\textless{}{-}}\NormalTok{ img\_matrix }\SpecialCharTok{/} \FunctionTok{max}\NormalTok{(img\_matrix)}

\FunctionTok{cat}\NormalTok{(}\StringTok{"Final image shape:"}\NormalTok{, }\FunctionTok{nrow}\NormalTok{(img\_matrix), }\StringTok{"x"}\NormalTok{, }\FunctionTok{ncol}\NormalTok{(img\_matrix), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Final image shape: 375 x 250 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Compute importance map}
\NormalTok{importance\_map }\OtherTok{\textless{}{-}} \FunctionTok{compute\_importance}\NormalTok{(img\_matrix)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"Importance map computed}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Importance map computed
\end{verbatim}

\subsection{Generating the Stippled
Image}\label{generating-the-stippled-image}

Now let's apply the stippling algorithm to create the blue noise
stippling pattern.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Generate stippling pattern}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Generating blue noise stippling pattern..."}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generating blue noise stippling pattern...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{stipple\_pattern, samples }\OperatorTok{=}\NormalTok{ void\_and\_cluster(}
\NormalTok{    img\_resized,}
\NormalTok{    percentage}\OperatorTok{=}\FloatTok{0.08}\NormalTok{,}
\NormalTok{    sigma}\OperatorTok{=}\FloatTok{0.9}\NormalTok{,}
\NormalTok{    content\_bias}\OperatorTok{=}\FloatTok{0.9}\NormalTok{,}
\NormalTok{    importance\_img}\OperatorTok{=}\NormalTok{importance\_map,}
\NormalTok{    noise\_scale\_factor}\OperatorTok{=}\FloatTok{0.1}
\NormalTok{)}

\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Generated }\SpecialCharTok{\{}\BuiltInTok{len}\NormalTok{(samples)}\SpecialCharTok{\}}\SpecialStringTok{ stipple points"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generated 7500 stipple points
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Stipple pattern shape: }\SpecialCharTok{\{}\NormalTok{stipple\_pattern}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Stipple pattern shape: (375, 250)
\end{verbatim}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Generate stippling pattern}
\FunctionTok{cat}\NormalTok{(}\StringTok{"Generating blue noise stippling pattern...}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generating blue noise stippling pattern...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{stipple\_result }\OtherTok{\textless{}{-}} \FunctionTok{void\_and\_cluster}\NormalTok{(}
\NormalTok{  img\_matrix,}
  \AttributeTok{percentage =} \FloatTok{0.08}\NormalTok{,}
  \AttributeTok{sigma =} \FloatTok{0.9}\NormalTok{,}
  \AttributeTok{content\_bias =} \FloatTok{0.9}\NormalTok{,}
  \AttributeTok{importance\_img =}\NormalTok{ importance\_map,}
  \AttributeTok{noise\_scale\_factor =} \FloatTok{0.1}
\NormalTok{)}

\NormalTok{stipple\_pattern }\OtherTok{\textless{}{-}}\NormalTok{ stipple\_result}\SpecialCharTok{$}\NormalTok{stipple}
\NormalTok{samples }\OtherTok{\textless{}{-}}\NormalTok{ stipple\_result}\SpecialCharTok{$}\NormalTok{samples}

\FunctionTok{cat}\NormalTok{(}\StringTok{"Generated"}\NormalTok{, }\FunctionTok{nrow}\NormalTok{(samples), }\StringTok{"stipple points}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generated 7500 stipple points
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"Stipple pattern shape:"}\NormalTok{, }\FunctionTok{nrow}\NormalTok{(stipple\_pattern), }\StringTok{"x"}\NormalTok{, }\FunctionTok{ncol}\NormalTok{(stipple\_pattern), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Stipple pattern shape: 375 x 250 
\end{verbatim}

\subsection{Displaying the Results}\label{displaying-the-results}

Let's visualize the original image, the importance map, and the stippled
version side by side for comparison.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, axes }\OperatorTok{=}\NormalTok{ plt.subplots(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{7}\NormalTok{, }\DecValTok{4}\NormalTok{))}

\CommentTok{\# Display original image}
\NormalTok{axes[}\DecValTok{0}\NormalTok{].imshow(img\_resized, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{axes[}\DecValTok{0}\NormalTok{].axis(}\StringTok{\textquotesingle{}off\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{axes[}\DecValTok{0}\NormalTok{].set\_title(}\StringTok{\textquotesingle{}Original Image\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}

\CommentTok{\# Display importance map}
\NormalTok{axes[}\DecValTok{1}\NormalTok{].imshow(importance\_map, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{axes[}\DecValTok{1}\NormalTok{].axis(}\StringTok{\textquotesingle{}off\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{axes[}\DecValTok{1}\NormalTok{].set\_title(}\StringTok{\textquotesingle{}Importance Map\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}

\CommentTok{\# Display stippled image}
\NormalTok{axes[}\DecValTok{2}\NormalTok{].imshow(stipple\_pattern, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{axes[}\DecValTok{2}\NormalTok{].axis(}\StringTok{\textquotesingle{}off\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{axes[}\DecValTok{2}\NormalTok{].set\_title(}\StringTok{\textquotesingle{}Blue Noise Stippling\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/display-results-1.pdf}}

}

\caption{Comparison of original image, importance map, and blue noise
stippling}

\end{figure}%

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{par}\NormalTok{(}\AttributeTok{mfrow =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{), }\AttributeTok{mar =} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{))}

\CommentTok{\# Original}
\FunctionTok{plot}\NormalTok{(img\_resized, }\AttributeTok{axes =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{main =} \StringTok{"Original Image"}\NormalTok{)}

\CommentTok{\# Importance map (matrix [h, w]) {-}\textgreater{} transpose for imager ([x, y])}
\FunctionTok{plot}\NormalTok{(}\FunctionTok{as.cimg}\NormalTok{(}\FunctionTok{t}\NormalTok{(importance\_map), }\AttributeTok{x =} \FunctionTok{ncol}\NormalTok{(importance\_map), }\AttributeTok{y =} \FunctionTok{nrow}\NormalTok{(importance\_map), }\AttributeTok{cc =} \DecValTok{1}\NormalTok{), }
     \AttributeTok{axes =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{main =} \StringTok{"Importance Map"}\NormalTok{)}

\CommentTok{\# Stipple pattern (matrix [h, w]) {-}\textgreater{} transpose for imager ([x, y])}
\FunctionTok{plot}\NormalTok{(}\FunctionTok{as.cimg}\NormalTok{(}\FunctionTok{t}\NormalTok{(stipple\_pattern), }\AttributeTok{x =} \FunctionTok{ncol}\NormalTok{(stipple\_pattern), }\AttributeTok{y =} \FunctionTok{nrow}\NormalTok{(stipple\_pattern), }\AttributeTok{cc =} \DecValTok{1}\NormalTok{), }
     \AttributeTok{axes =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{main =} \StringTok{"Blue Noise Stippling"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/display-results-r-3.pdf}}

}

\caption{Comparison of original image, importance map, and blue noise
stippling}

\end{figure}%

\subsection{Progressive Stippling
Animation}\label{progressive-stippling-animation}

This section creates a GIF showing how the stippled image looks as more
points are added sequentially. We'll use the already-computed stippling
points to generate frames at increments of 100 points.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\ImportTok{from}\NormalTok{ PIL }\ImportTok{import}\NormalTok{ Image}
\ImportTok{import}\NormalTok{ matplotlib.pyplot }\ImportTok{as}\NormalTok{ plt}
\ImportTok{from}\NormalTok{ matplotlib.animation }\ImportTok{import}\NormalTok{ PillowWriter}

\CommentTok{\# Use the existing samples array from the already{-}computed stippling}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Using existing stippling with }\SpecialCharTok{\{}\BuiltInTok{len}\NormalTok{(samples)}\SpecialCharTok{\}}\SpecialStringTok{ points"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Using existing stippling with 7500 points
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Image shape: }\SpecialCharTok{\{}\NormalTok{img\_resized}\SpecialCharTok{.}\NormalTok{shape}\SpecialCharTok{\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Image shape: (375, 250)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create progressive frames by adding points sequentially}
\NormalTok{frame\_increment }\OperatorTok{=} \DecValTok{100}
\NormalTok{frames }\OperatorTok{=}\NormalTok{ []}
\NormalTok{point\_counts }\OperatorTok{=}\NormalTok{ []}

\CommentTok{\# Start with white background}
\NormalTok{h, w }\OperatorTok{=}\NormalTok{ img\_resized.shape}
\NormalTok{progressive\_stipple }\OperatorTok{=}\NormalTok{ np.ones\_like(img\_resized)}

\CommentTok{\# Add first point and save initial frame}
\ControlFlowTok{if} \BuiltInTok{len}\NormalTok{(samples) }\OperatorTok{\textgreater{}} \DecValTok{0}\NormalTok{:}
\NormalTok{    y0, x0, intensity0 }\OperatorTok{=} \BuiltInTok{int}\NormalTok{(samples[}\DecValTok{0}\NormalTok{, }\DecValTok{0}\NormalTok{]), }\BuiltInTok{int}\NormalTok{(samples[}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{]), samples[}\DecValTok{0}\NormalTok{, }\DecValTok{2}\NormalTok{]}
\NormalTok{    progressive\_stipple[y0, x0] }\OperatorTok{=} \FloatTok{0.0}
\NormalTok{    frames.append(progressive\_stipple.copy())}
\NormalTok{    point\_counts.append(}\DecValTok{1}\NormalTok{)}

\CommentTok{\# Add remaining points sequentially and save frames at increments}
\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(}\DecValTok{1}\NormalTok{, }\BuiltInTok{len}\NormalTok{(samples)):}
\NormalTok{    y, x }\OperatorTok{=} \BuiltInTok{int}\NormalTok{(samples[i, }\DecValTok{0}\NormalTok{]), }\BuiltInTok{int}\NormalTok{(samples[i, }\DecValTok{1}\NormalTok{])}
\NormalTok{    progressive\_stipple[y, x] }\OperatorTok{=} \FloatTok{0.0}  \CommentTok{\# Add black dot}
    
    \CommentTok{\# Save frame at increments (100, 200, 300, ...) and at the end}
    \ControlFlowTok{if}\NormalTok{ (i }\OperatorTok{+} \DecValTok{1}\NormalTok{) }\OperatorTok{\%}\NormalTok{ frame\_increment }\OperatorTok{==} \DecValTok{0} \KeywordTok{or}\NormalTok{ i }\OperatorTok{==} \BuiltInTok{len}\NormalTok{(samples) }\OperatorTok{{-}} \DecValTok{1}\NormalTok{:}
\NormalTok{        frames.append(progressive\_stipple.copy())}
\NormalTok{        point\_counts.append(i }\OperatorTok{+} \DecValTok{1}\NormalTok{)}

\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Generated }\SpecialCharTok{\{}\BuiltInTok{len}\NormalTok{(frames)}\SpecialCharTok{\}}\SpecialStringTok{ frames"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generated 76 frames
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Point counts: }\SpecialCharTok{\{}\NormalTok{point\_counts}\SpecialCharTok{\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Point counts: [1, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2100, 2200, 2300, 2400, 2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200, 3300, 3400, 3500, 3600, 3700, 3800, 3900, 4000, 4100, 4200, 4300, 4400, 4500, 4600, 4700, 4800, 4900, 5000, 5100, 5200, 5300, 5400, 5500, 5600, 5700, 5800, 5900, 6000, 6100, 6200, 6300, 6400, 6500, 6600, 6700, 6800, 6900, 7000, 7100, 7200, 7300, 7400, 7500]
\end{verbatim}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Use the existing samples from the already{-}computed stippling}
\FunctionTok{cat}\NormalTok{(}\StringTok{"Using existing stippling with"}\NormalTok{, }\FunctionTok{nrow}\NormalTok{(samples), }\StringTok{"points}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Using existing stippling with 7500 points
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"Image shape:"}\NormalTok{, }\FunctionTok{nrow}\NormalTok{(img\_matrix), }\StringTok{"x"}\NormalTok{, }\FunctionTok{ncol}\NormalTok{(img\_matrix), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Image shape: 375 x 250 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create progressive frames by adding points sequentially}
\NormalTok{frame\_increment }\OtherTok{\textless{}{-}} \DecValTok{100}
\NormalTok{frames }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{()}
\NormalTok{point\_counts }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{()}

\CommentTok{\# Start with white background}
\NormalTok{progressive\_stipple }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FloatTok{1.0}\NormalTok{, }\AttributeTok{nrow =} \FunctionTok{nrow}\NormalTok{(img\_matrix), }\AttributeTok{ncol =} \FunctionTok{ncol}\NormalTok{(img\_matrix))}

\CommentTok{\# Add first point and save initial frame}
\ControlFlowTok{if}\NormalTok{(}\FunctionTok{nrow}\NormalTok{(samples) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
\NormalTok{  y0 }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(samples[}\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{])}
\NormalTok{  x0 }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(samples[}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{])}
\NormalTok{  progressive\_stipple[y0, x0] }\OtherTok{\textless{}{-}} \FloatTok{0.0}
\NormalTok{  frames[[}\DecValTok{1}\NormalTok{]] }\OtherTok{\textless{}{-}}\NormalTok{ progressive\_stipple}
\NormalTok{  point\_counts }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(point\_counts, }\DecValTok{1}\NormalTok{)}
\NormalTok{\}}

\CommentTok{\# Add remaining points sequentially and save frames at increments}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{2}\SpecialCharTok{:}\FunctionTok{nrow}\NormalTok{(samples)) \{}
\NormalTok{  y }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(samples[i, }\DecValTok{1}\NormalTok{])}
\NormalTok{  x }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(samples[i, }\DecValTok{2}\NormalTok{])}
\NormalTok{  progressive\_stipple[y, x] }\OtherTok{\textless{}{-}} \FloatTok{0.0}  \CommentTok{\# Add black dot}
  
  \CommentTok{\# Save frame at increments (100, 200, 300, ...) and at the end}
  \ControlFlowTok{if}\NormalTok{(i }\SpecialCharTok{\%\%}\NormalTok{ frame\_increment }\SpecialCharTok{==} \DecValTok{0} \SpecialCharTok{||}\NormalTok{ i }\SpecialCharTok{==} \FunctionTok{nrow}\NormalTok{(samples)) \{}
\NormalTok{    frames[[}\FunctionTok{length}\NormalTok{(frames) }\SpecialCharTok{+} \DecValTok{1}\NormalTok{]] }\OtherTok{\textless{}{-}}\NormalTok{ progressive\_stipple}
\NormalTok{    point\_counts }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(point\_counts, i)}
\NormalTok{  \}}
\NormalTok{\}}

\FunctionTok{cat}\NormalTok{(}\StringTok{"Generated"}\NormalTok{, }\FunctionTok{length}\NormalTok{(frames), }\StringTok{"frames}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Generated 76 frames
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"Point counts:"}\NormalTok{, }\FunctionTok{paste}\NormalTok{(point\_counts, }\AttributeTok{collapse =} \StringTok{", "}\NormalTok{), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Point counts: 1, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000, 1100, 1200, 1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2100, 2200, 2300, 2400, 2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200, 3300, 3400, 3500, 3600, 3700, 3800, 3900, 4000, 4100, 4200, 4300, 4400, 4500, 4600, 4700, 4800, 4900, 5000, 5100, 5200, 5300, 5400, 5500, 5600, 5700, 5800, 5900, 6000, 6100, 6200, 6300, 6400, 6500, 6600, 6700, 6800, 6900, 7000, 7100, 7200, 7300, 7400, 7500 
\end{verbatim}

Now let's create the GIF animation:

\subsubsection{Python}

\subsubsection{R}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{progressive_stippling.gif}}

}

\caption{Progressive stippling animation showing the sequential build-up
of points. Each frame represents an increment of 100 points,
demonstrating how the blue noise stippling pattern develops as more
points are added.}

\end{figure}%

\subsection{Appendix: Average Tone by
Section}\label{appendix-average-tone-by-section}

To understand the distribution of tones across the image and identify
the center of skin tone, we divide the image into a grid of small
sections and compute the average brightness in each section.

\subsubsection{Python}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Divide image into a grid of sections}
\NormalTok{grid\_rows }\OperatorTok{=} \DecValTok{16}
\NormalTok{grid\_cols }\OperatorTok{=} \DecValTok{12}

\NormalTok{h, w }\OperatorTok{=}\NormalTok{ img\_resized.shape}
\NormalTok{section\_h }\OperatorTok{=}\NormalTok{ h }\OperatorTok{//}\NormalTok{ grid\_rows}
\NormalTok{section\_w }\OperatorTok{=}\NormalTok{ w }\OperatorTok{//}\NormalTok{ grid\_cols}

\CommentTok{\# Create arrays to store average tones}
\NormalTok{average\_tones }\OperatorTok{=}\NormalTok{ np.zeros((grid\_rows, grid\_cols))}
\NormalTok{section\_coords }\OperatorTok{=}\NormalTok{ []}

\CommentTok{\# Compute average tone for each section}
\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_rows):}
    \ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_cols):}
\NormalTok{        y\_start }\OperatorTok{=}\NormalTok{ i }\OperatorTok{*}\NormalTok{ section\_h}
\NormalTok{        y\_end }\OperatorTok{=}\NormalTok{ (i }\OperatorTok{+} \DecValTok{1}\NormalTok{) }\OperatorTok{*}\NormalTok{ section\_h }\ControlFlowTok{if}\NormalTok{ i }\OperatorTok{\textless{}}\NormalTok{ grid\_rows }\OperatorTok{{-}} \DecValTok{1} \ControlFlowTok{else}\NormalTok{ h}
\NormalTok{        x\_start }\OperatorTok{=}\NormalTok{ j }\OperatorTok{*}\NormalTok{ section\_w}
\NormalTok{        x\_end }\OperatorTok{=}\NormalTok{ (j }\OperatorTok{+} \DecValTok{1}\NormalTok{) }\OperatorTok{*}\NormalTok{ section\_w }\ControlFlowTok{if}\NormalTok{ j }\OperatorTok{\textless{}}\NormalTok{ grid\_cols }\OperatorTok{{-}} \DecValTok{1} \ControlFlowTok{else}\NormalTok{ w}
        
\NormalTok{        section }\OperatorTok{=}\NormalTok{ img\_resized[y\_start:y\_end, x\_start:x\_end]}
\NormalTok{        avg\_tone }\OperatorTok{=}\NormalTok{ np.mean(section)}
\NormalTok{        average\_tones[i, j] }\OperatorTok{=}\NormalTok{ avg\_tone}
\NormalTok{        section\_coords.append((i, j, avg\_tone))}

\CommentTok{\# Display the grid with average tones}
\NormalTok{fig, axes }\OperatorTok{=}\NormalTok{ plt.subplots(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{7}\NormalTok{, }\DecValTok{5}\NormalTok{))}

\CommentTok{\# Show original image with grid overlay}
\NormalTok{axes[}\DecValTok{0}\NormalTok{].imshow(img\_resized, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{axes[}\DecValTok{0}\NormalTok{].set\_title(}\StringTok{\textquotesingle{}Original Image with Grid\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}
\NormalTok{axes[}\DecValTok{0}\NormalTok{].axis(}\StringTok{\textquotesingle{}off\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Draw grid lines}
\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_rows }\OperatorTok{+} \DecValTok{1}\NormalTok{):}
\NormalTok{    y }\OperatorTok{=}\NormalTok{ i }\OperatorTok{*}\NormalTok{ section\_h}
\NormalTok{    axes[}\DecValTok{0}\NormalTok{].axhline(y, color}\OperatorTok{=}\StringTok{\textquotesingle{}red\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\FloatTok{0.5}\NormalTok{, alpha}\OperatorTok{=}\FloatTok{0.5}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_cols }\OperatorTok{+} \DecValTok{1}\NormalTok{):}
\NormalTok{    x }\OperatorTok{=}\NormalTok{ j }\OperatorTok{*}\NormalTok{ section\_w}
\NormalTok{    axes[}\DecValTok{0}\NormalTok{].axvline(x, color}\OperatorTok{=}\StringTok{\textquotesingle{}red\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\FloatTok{0.5}\NormalTok{, alpha}\OperatorTok{=}\FloatTok{0.5}\NormalTok{)}

\CommentTok{\# Show heatmap of average tones}
\NormalTok{im }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{1}\NormalTok{].imshow(average\_tones, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, vmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, vmax}\OperatorTok{=}\DecValTok{1}\NormalTok{, aspect}\OperatorTok{=}\StringTok{\textquotesingle{}auto\textquotesingle{}}\NormalTok{)}
\NormalTok{axes[}\DecValTok{1}\NormalTok{].set\_title(}\StringTok{\textquotesingle{}Average Tone by Section\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{, pad}\OperatorTok{=}\DecValTok{10}\NormalTok{)}
\NormalTok{axes[}\DecValTok{1}\NormalTok{].set\_xlabel(}\StringTok{\textquotesingle{}Column\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{12}\NormalTok{)}
\NormalTok{axes[}\DecValTok{1}\NormalTok{].set\_ylabel(}\StringTok{\textquotesingle{}Row\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{12}\NormalTok{)}

\CommentTok{\# Add text annotations showing average tone values}
\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_rows):}
    \ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_cols):}
\NormalTok{        tone }\OperatorTok{=}\NormalTok{ average\_tones[i, j]}
        \CommentTok{\# Use white text for dark sections, black text for light sections}
\NormalTok{        text\_color }\OperatorTok{=} \StringTok{\textquotesingle{}white\textquotesingle{}} \ControlFlowTok{if}\NormalTok{ tone }\OperatorTok{\textless{}} \FloatTok{0.5} \ControlFlowTok{else} \StringTok{\textquotesingle{}black\textquotesingle{}}
\NormalTok{        axes[}\DecValTok{1}\NormalTok{].text(j, i, }\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{tone}\SpecialCharTok{:.2f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{, ha}\OperatorTok{=}\StringTok{\textquotesingle{}center\textquotesingle{}}\NormalTok{, va}\OperatorTok{=}\StringTok{\textquotesingle{}center\textquotesingle{}}\NormalTok{, }
\NormalTok{                     color}\OperatorTok{=}\NormalTok{text\_color, fontsize}\OperatorTok{=}\DecValTok{6}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}

\NormalTok{plt.colorbar(im, ax}\OperatorTok{=}\NormalTok{axes[}\DecValTok{1}\NormalTok{], label}\OperatorTok{=}\StringTok{\textquotesingle{}Average Brightness\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<matplotlib.colorbar.Colorbar object at 0x00000252DF1E6E40>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/tone-analysis-1.pdf}}

}

\caption{Grid showing average tone in each section}

\end{figure}%

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Print summary statistics}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"}\CharTok{\textbackslash{}n}\SpecialStringTok{Grid size: }\SpecialCharTok{\{}\NormalTok{grid\_rows}\SpecialCharTok{\}}\SpecialStringTok{ rows Ã— }\SpecialCharTok{\{}\NormalTok{grid\_cols}\SpecialCharTok{\}}\SpecialStringTok{ columns"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Grid size: 16 rows Ã— 12 columns
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Section size: approximately }\SpecialCharTok{\{}\NormalTok{section\_h}\SpecialCharTok{\}}\SpecialStringTok{ Ã— }\SpecialCharTok{\{}\NormalTok{section\_w}\SpecialCharTok{\}}\SpecialStringTok{ pixels"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Section size: approximately 23 Ã— 20 pixels
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"}\CharTok{\textbackslash{}n}\SpecialStringTok{Average tone statistics:"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Average tone statistics:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"  Overall mean: }\SpecialCharTok{\{}\NormalTok{np}\SpecialCharTok{.}\NormalTok{mean(average\_tones)}\SpecialCharTok{:.3f\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Overall mean: 0.636
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"  Overall std: }\SpecialCharTok{\{}\NormalTok{np}\SpecialCharTok{.}\NormalTok{std(average\_tones)}\SpecialCharTok{:.3f\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Overall std: 0.321
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"  Min: }\SpecialCharTok{\{}\NormalTok{np}\SpecialCharTok{.}\BuiltInTok{min}\NormalTok{(average\_tones)}\SpecialCharTok{:.3f\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Min: 0.072
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"  Max: }\SpecialCharTok{\{}\NormalTok{np}\SpecialCharTok{.}\BuiltInTok{max}\NormalTok{(average\_tones)}\SpecialCharTok{:.3f\}}\SpecialStringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Max: 0.945
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Find sections with tones close to skin tone (around 0.7)}
\NormalTok{skin\_tone\_target }\OperatorTok{=} \FloatTok{0.7}
\NormalTok{tolerance }\OperatorTok{=} \FloatTok{0.1}
\NormalTok{skin\_tone\_sections }\OperatorTok{=}\NormalTok{ [(i, j, tone) }\ControlFlowTok{for}\NormalTok{ i, j, tone }\KeywordTok{in}\NormalTok{ section\_coords }
                       \ControlFlowTok{if} \BuiltInTok{abs}\NormalTok{(tone }\OperatorTok{{-}}\NormalTok{ skin\_tone\_target) }\OperatorTok{\textless{}}\NormalTok{ tolerance]}

\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"}\CharTok{\textbackslash{}n}\SpecialStringTok{Sections with tone close to skin tone (0.7 Â± }\SpecialCharTok{\{}\NormalTok{tolerance}\SpecialCharTok{\}}\SpecialStringTok{):"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Sections with tone close to skin tone (0.7 Â± 0.1):
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{if}\NormalTok{ skin\_tone\_sections:}
    \ControlFlowTok{for}\NormalTok{ i, j, tone }\KeywordTok{in} \BuiltInTok{sorted}\NormalTok{(skin\_tone\_sections, key}\OperatorTok{=}\KeywordTok{lambda}\NormalTok{ x: }\BuiltInTok{abs}\NormalTok{(x[}\DecValTok{2}\NormalTok{] }\OperatorTok{{-}}\NormalTok{ skin\_tone\_target)):}
        \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"  Row }\SpecialCharTok{\{}\NormalTok{i}\SpecialCharTok{\}}\SpecialStringTok{, Col }\SpecialCharTok{\{}\NormalTok{j}\SpecialCharTok{\}}\SpecialStringTok{: }\SpecialCharTok{\{}\NormalTok{tone}\SpecialCharTok{:.3f\}}\SpecialStringTok{"}\NormalTok{)}
\ControlFlowTok{else}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(}\StringTok{"  None found"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Row 4, Col 6: 0.704
  Row 9, Col 6: 0.709
  Row 3, Col 6: 0.690
  Row 3, Col 7: 0.711
  Row 3, Col 3: 0.714
  Row 4, Col 7: 0.685
  Row 10, Col 6: 0.684
  Row 9, Col 7: 0.679
  Row 8, Col 4: 0.672
  Row 7, Col 4: 0.736
  Row 6, Col 4: 0.659
  Row 8, Col 7: 0.742
  Row 9, Col 5: 0.655
  Row 1, Col 7: 0.654
  Row 10, Col 7: 0.749
  Row 7, Col 6: 0.646
  Row 1, Col 4: 0.758
  Row 7, Col 7: 0.637
  Row 9, Col 4: 0.635
  Row 3, Col 5: 0.634
  Row 1, Col 5: 0.633
  Row 12, Col 5: 0.632
  Row 6, Col 7: 0.631
  Row 11, Col 8: 0.628
  Row 4, Col 8: 0.776
  Row 12, Col 8: 0.782
  Row 5, Col 3: 0.785
  Row 4, Col 5: 0.614
  Row 5, Col 8: 0.794
  Row 8, Col 3: 0.796
  Row 4, Col 3: 0.797
  Row 6, Col 6: 0.601
  Row 2, Col 8: 0.600
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Print full grid as table}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"}\CharTok{\textbackslash{}n}\SpecialStringTok{Full grid of average tones (row, col):"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Full grid of average tones (row, col):
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{(}\StringTok{"     "}\NormalTok{, end}\OperatorTok{=}\StringTok{""}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_cols):}
    \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Col}\SpecialCharTok{\{}\NormalTok{j}\SpecialCharTok{:2d\}}\SpecialStringTok{ "}\NormalTok{, end}\OperatorTok{=}\StringTok{""}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Col 0 Col 1 Col 2 Col 3 Col 4 Col 5 Col 6 Col 7 Col 8 Col 9 Col10 Col11 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{print}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_rows):}
    \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"Row}\SpecialCharTok{\{}\NormalTok{i}\SpecialCharTok{:2d\}}\SpecialStringTok{ "}\NormalTok{, end}\OperatorTok{=}\StringTok{""}\NormalTok{)}
    \ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(grid\_cols):}
        \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f"}\SpecialCharTok{\{}\NormalTok{average\_tones[i, j]}\SpecialCharTok{:.3f\}}\SpecialStringTok{ "}\NormalTok{, end}\OperatorTok{=}\StringTok{""}\NormalTok{)}
    \BuiltInTok{print}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Row 0 0.945 0.945 0.945 0.945 0.945 0.945 0.945 0.945 0.945 0.945 0.945 0.945 
Row 1 0.945 0.945 0.945 0.945 0.758 0.633 0.502 0.654 0.932 0.945 0.945 0.945 
Row 2 0.945 0.945 0.945 0.854 0.241 0.282 0.324 0.299 0.600 0.945 0.945 0.945 
Row 3 0.945 0.945 0.945 0.714 0.448 0.634 0.690 0.711 0.582 0.945 0.945 0.945 
Row 4 0.945 0.945 0.945 0.797 0.543 0.614 0.704 0.685 0.776 0.945 0.945 0.945 
Row 5 0.945 0.945 0.945 0.785 0.578 0.565 0.566 0.584 0.794 0.945 0.945 0.945 
Row 6 0.945 0.945 0.945 0.893 0.659 0.599 0.601 0.631 0.847 0.945 0.945 0.945 
Row 7 0.945 0.945 0.945 0.945 0.736 0.589 0.646 0.637 0.905 0.945 0.945 0.945 
Row 8 0.945 0.945 0.945 0.796 0.672 0.571 0.579 0.742 0.889 0.945 0.945 0.945 
Row 9 0.945 0.812 0.470 0.166 0.635 0.655 0.709 0.679 0.384 0.563 0.804 0.937 
Row10 0.252 0.123 0.110 0.117 0.378 0.833 0.684 0.749 0.472 0.226 0.252 0.475 
Row11 0.111 0.122 0.120 0.126 0.167 0.883 0.864 0.944 0.628 0.234 0.229 0.264 
Row12 0.110 0.117 0.125 0.120 0.141 0.632 0.893 0.925 0.782 0.230 0.230 0.227 
Row13 0.103 0.118 0.128 0.128 0.139 0.357 0.930 0.904 0.867 0.215 0.224 0.224 
Row14 0.086 0.116 0.124 0.128 0.127 0.171 0.826 0.919 0.888 0.227 0.211 0.212 
Row15 0.072 0.083 0.122 0.138 0.120 0.134 0.572 0.934 0.849 0.230 0.217 0.181 
\end{verbatim}

\subsubsection{R}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Divide image into a grid of sections}
\NormalTok{grid\_rows }\OtherTok{\textless{}{-}} \DecValTok{16}
\NormalTok{grid\_cols }\OtherTok{\textless{}{-}} \DecValTok{12}

\NormalTok{h }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(img\_matrix)}
\NormalTok{w }\OtherTok{\textless{}{-}} \FunctionTok{ncol}\NormalTok{(img\_matrix)}
\NormalTok{section\_h }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(h }\SpecialCharTok{/}\NormalTok{ grid\_rows)}
\NormalTok{section\_w }\OtherTok{\textless{}{-}} \FunctionTok{as.integer}\NormalTok{(w }\SpecialCharTok{/}\NormalTok{ grid\_cols)}

\CommentTok{\# Create arrays to store average tones}
\NormalTok{average\_tones }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{0}\NormalTok{, }\AttributeTok{nrow =}\NormalTok{ grid\_rows, }\AttributeTok{ncol =}\NormalTok{ grid\_cols)}
\NormalTok{section\_coords }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{()}

\CommentTok{\# Compute average tone for each section}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_rows) \{}
  \ControlFlowTok{for}\NormalTok{(j }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols) \{}
\NormalTok{    y\_start }\OtherTok{\textless{}{-}}\NormalTok{ (i }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{*}\NormalTok{ section\_h }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{    y\_end }\OtherTok{\textless{}{-}} \ControlFlowTok{if}\NormalTok{(i }\SpecialCharTok{\textless{}}\NormalTok{ grid\_rows) i }\SpecialCharTok{*}\NormalTok{ section\_h }\ControlFlowTok{else}\NormalTok{ h}
\NormalTok{    x\_start }\OtherTok{\textless{}{-}}\NormalTok{ (j }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{) }\SpecialCharTok{*}\NormalTok{ section\_w }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{    x\_end }\OtherTok{\textless{}{-}} \ControlFlowTok{if}\NormalTok{(j }\SpecialCharTok{\textless{}}\NormalTok{ grid\_cols) j }\SpecialCharTok{*}\NormalTok{ section\_w }\ControlFlowTok{else}\NormalTok{ w}
    
\NormalTok{    section }\OtherTok{\textless{}{-}}\NormalTok{ img\_matrix[y\_start}\SpecialCharTok{:}\NormalTok{y\_end, x\_start}\SpecialCharTok{:}\NormalTok{x\_end]}
\NormalTok{    avg\_tone }\OtherTok{\textless{}{-}} \FunctionTok{mean}\NormalTok{(section)}
\NormalTok{    average\_tones[i, j] }\OtherTok{\textless{}{-}}\NormalTok{ avg\_tone}
\NormalTok{    section\_coords[[}\FunctionTok{length}\NormalTok{(section\_coords) }\SpecialCharTok{+} \DecValTok{1}\NormalTok{]] }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(i, j, avg\_tone)}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{\# Display the grid with average tones}
\FunctionTok{par}\NormalTok{(}\AttributeTok{mfrow =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{), }\AttributeTok{mar =} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{))}

\CommentTok{\# Show original image with grid overlay}
\FunctionTok{plot}\NormalTok{(img\_resized, }\AttributeTok{axes =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{main =} \StringTok{"Original Image with Grid"}\NormalTok{)}

\CommentTok{\# Draw grid lines (approximate)}
\CommentTok{\# Note: imager plots use different coordinate system, so grid lines are approximate}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{0}\SpecialCharTok{:}\NormalTok{grid\_rows) \{}
\NormalTok{  y }\OtherTok{\textless{}{-}}\NormalTok{ i }\SpecialCharTok{*}\NormalTok{ section\_h}
  \FunctionTok{abline}\NormalTok{(}\AttributeTok{h =}\NormalTok{ y, }\AttributeTok{col =} \StringTok{\textquotesingle{}red\textquotesingle{}}\NormalTok{, }\AttributeTok{lwd =} \FloatTok{0.5}\NormalTok{, }\AttributeTok{lty =} \DecValTok{2}\NormalTok{)}
\NormalTok{\}}
\ControlFlowTok{for}\NormalTok{(j }\ControlFlowTok{in} \DecValTok{0}\SpecialCharTok{:}\NormalTok{grid\_cols) \{}
\NormalTok{  x }\OtherTok{\textless{}{-}}\NormalTok{ j }\SpecialCharTok{*}\NormalTok{ section\_w}
  \FunctionTok{abline}\NormalTok{(}\AttributeTok{v =}\NormalTok{ x, }\AttributeTok{col =} \StringTok{\textquotesingle{}red\textquotesingle{}}\NormalTok{, }\AttributeTok{lwd =} \FloatTok{0.5}\NormalTok{, }\AttributeTok{lty =} \DecValTok{2}\NormalTok{)}
\NormalTok{\}}

\CommentTok{\# Show heatmap of average tones}
\FunctionTok{image}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols, }\DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_rows, }\FunctionTok{t}\NormalTok{(average\_tones), }
      \AttributeTok{col =} \FunctionTok{gray}\NormalTok{(}\FunctionTok{seq}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\AttributeTok{length.out =} \DecValTok{256}\NormalTok{)),}
      \AttributeTok{xlab =} \StringTok{"Column"}\NormalTok{, }\AttributeTok{ylab =} \StringTok{"Row"}\NormalTok{,}
      \AttributeTok{main =} \StringTok{"Average Tone by Section"}\NormalTok{,}
      \AttributeTok{axes =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{axis}\NormalTok{(}\DecValTok{1}\NormalTok{, }\AttributeTok{at =} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols)}
\FunctionTok{axis}\NormalTok{(}\DecValTok{2}\NormalTok{, }\AttributeTok{at =} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_rows)}

\CommentTok{\# Add text annotations showing average tone values}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_rows) \{}
  \ControlFlowTok{for}\NormalTok{(j }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols) \{}
\NormalTok{    tone }\OtherTok{\textless{}{-}}\NormalTok{ average\_tones[i, j]}
    \CommentTok{\# Use white text for dark sections, black text for light sections}
\NormalTok{    text\_color }\OtherTok{\textless{}{-}} \ControlFlowTok{if}\NormalTok{(tone }\SpecialCharTok{\textless{}} \FloatTok{0.5}\NormalTok{) }\StringTok{\textquotesingle{}white\textquotesingle{}} \ControlFlowTok{else} \StringTok{\textquotesingle{}black\textquotesingle{}}
    \FunctionTok{text}\NormalTok{(j, i, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{\textquotesingle{}\%.2f\textquotesingle{}}\NormalTok{, tone), }
         \AttributeTok{col =}\NormalTok{ text\_color, }\AttributeTok{cex =} \FloatTok{0.4}\NormalTok{, }\AttributeTok{font =} \DecValTok{2}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/tone-analysis-r-3.pdf}}

}

\caption{Grid showing average tone in each section}

\end{figure}%

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Print summary statistics}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Grid size:"}\NormalTok{, grid\_rows, }\StringTok{"rows Ã—"}\NormalTok{, grid\_cols, }\StringTok{"columns}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Grid size: 16 rows Ã— 12 columns
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"Section size: approximately"}\NormalTok{, section\_h, }\StringTok{"Ã—"}\NormalTok{, section\_w, }\StringTok{"pixels}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Section size: approximately 23 Ã— 20 pixels
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Average tone statistics:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Average tone statistics:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"  Overall mean:"}\NormalTok{, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f"}\NormalTok{, }\FunctionTok{mean}\NormalTok{(average\_tones)), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Overall mean: 0.666 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"  Overall std:"}\NormalTok{, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f"}\NormalTok{, }\FunctionTok{sd}\NormalTok{(average\_tones)), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Overall std: 0.333 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"  Min:"}\NormalTok{, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f"}\NormalTok{, }\FunctionTok{min}\NormalTok{(average\_tones)), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Min: 0.068 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"  Max:"}\NormalTok{, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f"}\NormalTok{, }\FunctionTok{max}\NormalTok{(average\_tones)), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Max: 0.949 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Find sections with tones close to skin tone (around 0.7)}
\NormalTok{skin\_tone\_target }\OtherTok{\textless{}{-}} \FloatTok{0.7}
\NormalTok{tolerance }\OtherTok{\textless{}{-}} \FloatTok{0.1}
\NormalTok{skin\_tone\_sections }\OtherTok{\textless{}{-}} \FunctionTok{Filter}\NormalTok{(}\ControlFlowTok{function}\NormalTok{(x) }\FunctionTok{abs}\NormalTok{(x[}\DecValTok{3}\NormalTok{] }\SpecialCharTok{{-}}\NormalTok{ skin\_tone\_target) }\SpecialCharTok{\textless{}}\NormalTok{ tolerance, section\_coords)}

\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Sections with tone close to skin tone (0.7 Â±"}\NormalTok{, tolerance, }\StringTok{"):}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Sections with tone close to skin tone (0.7 Â± 0.1 ):
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{if}\NormalTok{(}\FunctionTok{length}\NormalTok{(skin\_tone\_sections) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
  \CommentTok{\# Sort by distance from target}
\NormalTok{  sorted\_sections }\OtherTok{\textless{}{-}}\NormalTok{ skin\_tone\_sections[}\FunctionTok{order}\NormalTok{(}\FunctionTok{sapply}\NormalTok{(skin\_tone\_sections, }\ControlFlowTok{function}\NormalTok{(x) }\FunctionTok{abs}\NormalTok{(x[}\DecValTok{3}\NormalTok{] }\SpecialCharTok{{-}}\NormalTok{ skin\_tone\_target)))]}
  \ControlFlowTok{for}\NormalTok{(section }\ControlFlowTok{in}\NormalTok{ sorted\_sections) \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"  Row"}\NormalTok{, section[}\DecValTok{1}\NormalTok{], }\StringTok{", Col"}\NormalTok{, section[}\DecValTok{2}\NormalTok{], }\StringTok{":"}\NormalTok{, }\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f"}\NormalTok{, section[}\DecValTok{3}\NormalTok{]), }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
  \FunctionTok{cat}\NormalTok{(}\StringTok{"  None found}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Row 2 , Col 8 : 0.688 
  Row 5 , Col 5 : 0.719 
  Row 9 , Col 7 : 0.732 
  Row 2 , Col 6 : 0.666 
  Row 4 , Col 4 : 0.738 
  Row 10 , Col 5 : 0.658 
  Row 9 , Col 6 : 0.753 
  Row 6 , Col 8 : 0.759 
  Row 6 , Col 6 : 0.760 
  Row 6 , Col 7 : 0.762 
  Row 6 , Col 5 : 0.765 
  Row 3 , Col 9 : 0.631 
  Row 13 , Col 6 : 0.628 
  Row 4 , Col 9 : 0.626 
  Row 12 , Col 9 : 0.625 
  Row 13 , Col 9 : 0.780 
  Row 2 , Col 5 : 0.783 
  Row 8 , Col 6 : 0.790 
  Row 7 , Col 7 : 0.795 
  Row 8 , Col 8 : 0.796 
  Row 10 , Col 11 : 0.798 
  Row 9 , Col 4 : 0.800 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Print full grid as table}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Full grid of average tones (row, col):}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Full grid of average tones (row, col):
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"     "}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{(j }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols) \{}
  \FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"Col\%2d "}\NormalTok{, j))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Col 1 Col 2 Col 3 Col 4 Col 5 Col 6 Col 7 Col 8 Col 9 Col10 Col11 Col12 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_rows) \{}
  \FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"Row\%2d "}\NormalTok{, i))}
  \ControlFlowTok{for}\NormalTok{(j }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\NormalTok{grid\_cols) \{}
    \FunctionTok{cat}\NormalTok{(}\FunctionTok{sprintf}\NormalTok{(}\StringTok{"\%.3f "}\NormalTok{, average\_tones[i, j]))}
\NormalTok{  \}}
  \FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Row 1 0.949 0.949 0.949 0.949 0.949 0.949 0.949 0.949 0.949 0.949 0.949 0.949 
Row 2 0.949 0.949 0.949 0.949 0.783 0.666 0.555 0.688 0.938 0.949 0.949 0.949 
Row 3 0.949 0.949 0.949 0.867 0.305 0.380 0.436 0.384 0.631 0.949 0.949 0.949 
Row 4 0.949 0.949 0.949 0.738 0.596 0.859 0.904 0.885 0.626 0.949 0.949 0.949 
Row 5 0.949 0.949 0.949 0.820 0.719 0.817 0.904 0.846 0.806 0.949 0.949 0.949 
Row 6 0.949 0.949 0.949 0.880 0.765 0.760 0.762 0.759 0.876 0.949 0.949 0.949 
Row 7 0.949 0.949 0.949 0.930 0.860 0.821 0.795 0.825 0.914 0.949 0.949 0.949 
Row 8 0.949 0.949 0.949 0.949 0.869 0.790 0.849 0.796 0.928 0.949 0.949 0.949 
Row 9 0.949 0.949 0.949 0.800 0.805 0.753 0.732 0.833 0.891 0.949 0.949 0.949 
Row10 0.949 0.817 0.471 0.165 0.658 0.846 0.882 0.805 0.357 0.549 0.798 0.941 
Row11 0.253 0.120 0.107 0.115 0.379 0.881 0.884 0.825 0.454 0.200 0.222 0.451 
Row12 0.109 0.117 0.116 0.123 0.164 0.884 0.880 0.944 0.625 0.210 0.203 0.232 
Row13 0.105 0.112 0.120 0.116 0.138 0.628 0.893 0.925 0.780 0.207 0.204 0.197 
Row14 0.101 0.114 0.122 0.124 0.135 0.350 0.927 0.904 0.868 0.195 0.198 0.192 
Row15 0.082 0.115 0.121 0.125 0.123 0.165 0.820 0.919 0.890 0.211 0.186 0.182 
Row16 0.068 0.083 0.119 0.138 0.117 0.127 0.562 0.934 0.850 0.222 0.192 0.156 
\end{verbatim}

\subsection{Challenge Requirements ðŸ“‹}\label{challenge-requirements-1}

\subsubsection{Python}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{verbatim}
(np.float64(-0.5), np.float64(249.5), np.float64(374.5), np.float64(-0.5))
\end{verbatim}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/challenge-comparison-1.pdf}}

}

\caption{Side-by-side comparison of original and stippled images}

\end{figure}%

\subsubsection{R}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{index_files/figure-pdf/challenge-comparison-r-3.pdf}}

}

\caption{Side-by-side comparison of original and stippled images}

\end{figure}%




\end{document}
